<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions"%>
<%@ taglib prefix="sec" uri="http://www.springframework.org/security/tags" %>

<sec:authorize access="isAuthenticated()">
	<sec:authentication var="userId" 	property="principal.username" />
	<sec:authentication var="userName" 	property="principal.nickname"/>
</sec:authorize>
<c:set var="contextPath" value="<%=request.getContextPath()%>"></c:set>
<c:set var="search" value='"' />
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="ko">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=Edge">
		<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport" />
		<meta content="" name="description" />
		<meta content="" name="author" />
		<c:import url="/WEB-INF/views/mng/include/import.jsp" charEncoding="UTF-8"></c:import>
		<title>KEPCO Cloud Service Platform</title>
	</head>

	<body>
		<!-- begin #page-container -->
		<div id="page-container" class="fade page-container page-header-fixed page-sidebar-fixed page-with-footer">

			<!-- begin #header -->
			<c:import url="/WEB-INF/views/mng/include/header.jsp" charEncoding="UTF-8"></c:import>
			<!-- end #header -->
			<!-- begin #sidebar -->
			<c:import url="/WEB-INF/views/mng/include/sidebar.jsp" charEncoding="UTF-8"></c:import>
			<!-- end #sidebar -->

			<!-- begin #content -->
			<div id="content" class="content">
				<!-- begin #content header -->
				<div class="page_header m-b-30">
					<h1>자원요청 승인</h1>
					<div class="pageNav">
						<a href="#" class="home"><i></i></a><a href="#">승인/작업 처리</a><a href="#" class="on">자원요청 승인</a>
					</div>
				</div>
				<!-- end #content header -->
				
				<!-- begin page-body 버튼박스  -->
				<div>
					<c:forEach items="${getProductAppSteplist}" var="productApprovalStepInfo" varStatus="status" >
						<c:choose>
							<c:when test="${productApprovalStepInfo.apprvState eq 'APPRV_UNASSIGNED' and productApprovalStepInfo.stepLevel > 4}">

								<div class="row tac m-t-50">
									<a type="button" class="rbton bton_blue" onclick="openApproveReviewModal(2)"><i class="fa fa-pencil"></i> 신청</a>
									<a type="button" class="rbton bton_orange" onclick="projectRejectedPopup('${productApprovalStepInfo.stepLevel}','${orderNo}','${productApprovalStepInfo.rightStepId}')"><i class="fa fa-reply"></i> 반려</a>
									<a type="button" class="rbton bton_dgrey" onclick="moveListPage()"><i class="fa fa-list"></i> 목록</a>
								</div>
							</c:when>
							<c:when test="${productApprovalStepInfo.apprvAuth eq 'Y' and productApprovalStepInfo.apprvState eq 'APPRV_PROCESSING' and productApprovalStepInfo.stepLevel > 4}">
								<c:choose>
									<c:when test="${productApprovalStepInfo.apprvState eq 'APPRV_PROCESSING' and productApprovalStepInfo.stepId eq stepId }">
										<div class="row tac m-t-50">
											<a type="button" class="rbton bton_blue"  onclick="projectApprving('${productApprovalStepInfo.stepLevel}','${orderNo}','${productApprovalStepInfo.rightStepId}')"><i class="fa fa-gavel"></i> 승인</a>
											<a type="button" class="rbton bton_orange" onclick="projectRejectedPopup('${productApprovalStepInfo.stepLevel}','${orderNo}','${productApprovalStepInfo.rightStepId}')"><i class="fa fa-reply"></i> 반려</a>
											<a type="button" class="rbton bton_dgrey" onclick="moveListPage()"><i class="fa fa-list"></i> 목록</a>
										</div>
									</c:when>
									<c:otherwise>
										<c:if test="${productApprovalStepInfo.apprvState != 'APPRV_PROCESSING' and productApprovalStepInfo.stepId eq stepId }">
											<div class="row tac m-t-50">
												<a type="button" class="rbton bton_dgrey" onclick="moveListPage()"><i class="fa fa-list"></i> 목록</a>
											</div>
										</c:if>
									</c:otherwise>
								</c:choose>
							</c:when>
							<c:otherwise>
								<c:if test="${productApprovalStepInfo.stepId eq stepId }">
									<div class="row tac m-t-50">
										<a type="button" class="rbton bton_dgrey" onclick="moveListPage()"><i class="fa fa-list"></i> 목록</a>
									</div>
								</c:if>
							</c:otherwise>
						</c:choose>

						<c:if test="${inject eq 'Y' and  productApprovalStepInfo.apprvState eq 'APPRV_REJECTED'}">
							<h2 class="titleBuType01 m-t-40 m-b-15">반려사유</h2>
							<textarea  rows="5" placeholder="비고란 입니다. 내용을 입력하세요" id="rejectedApprvDescription" name="rejectedApprvDescription" readonly >${productApprovalStepInfo.apprvDescription}</textarea>
							<div class="row tac m-t-50">
								<a type="button" class="rbton bton_dgrey" onclick="moveListPage()"><i class="fa fa-list"></i>  목록</a>
							</div>
						</c:if>
					</c:forEach>
				</div>
				<!-- end page-body 버튼박스  -->
				<!-- begin page-body 프로젝트 정보  -->
				<div class="client_DetailArea mt20">
					<!-- 프로젝트 정보 -->
					<h2 class="customer_Id">${projectInfo.projectName}</h2>
					<div class="clear"></div>
					<h3 class="pname dpin">${projectInfo.projectAlias} </h3>
					<div class="clear"></div>
					<div class="mt20">
			 			<span class="dpin fb fc-blue2">본부 : </span><span class="ml5">${fn:split(projectInfo.deptName2,'/')[1]}</span><span class="dpin fb ml40 fc-blue2">처(실) : </span><span class="ml5">${fn:split(projectInfo.deptName2,'/')[2]} </span><span class="dpin fb ml40 fc-blue2">부서 : </span><span class="ml5">${fn:split(projectInfo.deptName2,'/')[3]} </span><span class="dpin fb ml40 fc-blue2">담당자  : </span><span class="ml5">${projectInfo.customerName}(${projectInfo.managerTel})</span>
			 		</div>
			 		<div class="fileList">
						<div class="wrap">
							<strong>첨부파일</strong>
							<ul class="m-t-10">
								<c:forEach items="${file}" var="filelist" varStatus="status" >
									<li>
										<span class="f15 fc11">${filelist.fileName}</span>
										<span class="f15 fc66 fontVdn">(${filelist.fileTranSize})</span> 
										<a href="${contextPath}/mbr/cmm/file/download/${filelist.fileId}" class="btn_download ml20"></a>
									</li>
								</c:forEach>
							</ul>
						</div>
					</div>

			 		<!-- 프로젝트 내 현재 가용 용량  -->
					<div class="usageStatusWrap mt20">
						<strong class="titleLabel ml-24">현재 가용 용량</strong>
						<c:forEach items="${getCloudAvailListVo}" var="getCloudAvailListVo" varStatus="status" >
							<dl>
								<dt><c:out value="${getCloudAvailListVo.projectName}"></c:out></dt>
								<dd><span class="title"><i class="fa fa-circle f12 fc-orange mr10"></i>SERVER</span><span class="cnt"><em class="fc-orange"  id="allVmAvail"><fmt:formatNumber value="${getCloudAvailListVo.vmAvail}" pattern="#,###"/></em>EA</span></dd>
								<dd><span class="title"><i class="fa fa-circle f12 fc-violet mr10"></i>vCPU</span><span class="cnt"><em class="fc-violet" id="allVcpuAvail"><fmt:formatNumber value="${getCloudAvailListVo.vcpuAvail}" pattern="#,###"/></em>Core</span></dd>
								<dd><span class="title"><i class="fa fa-circle f12 fc-blue mr10"></i>MEMORY</span><span class="cnt"><em class="fc-blue" id="allMemAvail"><fmt:formatNumber value="${getCloudAvailListVo.memAvail}" pattern="#,###"/></em>GB</span></dd>
								<dd><span class="title"><i class="fa fa-circle f12 fc-green mr10"></i>DISK</span><span class="cnt"><em class="fc-green" id="allDiskAvail"><fmt:formatNumber value="${getCloudAvailListVo.diskAvail}" pattern="#,###"/></em>GB</span></dd>
								<dd class="mt30"> <a type="button" onclick="useVolumeDetail('${getCloudAvailListVo.projectId}');"><button class="cbton bton_blue"><i class="fa fa-battery-half ml-2"></i> </button></a></dd>
							</dl>
						</c:forEach>
					</div>
				</div>
				<!-- end page-body 프로젝트 정보  -->
				<!-- begin page-body 자원상세목록  -->
				<div class="detailView">
					<span class="f16 fc11">펼쳐보기</span>
					<span class="icon"></span>
				</div>
				<div class="detailVeiwArea p30 b5dc mt20">

					<c:set var="amount" value="" />
					<input type="hidden" id="list" name="list" value="${getReqlistvo.size()}">
					<input type="hidden" id="onDemandFlag" value="">
					<input type="hidden" id="allOrderNo" value="${orderNo}">
					<input type="hidden" id="stepId" value="${stepId}">
					<input type="hidden" id="userApprvState" value="${userApprvState}">

					<input type="hidden" id="h_hostname" value="">
					<input type="hidden" id="h_ip" value="">
					<input type="hidden" id="h_backupIp" value="">
					<input type="hidden" id="h_orderNo" value="">


					<!-----기본자원 시작------->
					<h2 class="titleBuType01 m-b-15">기본자원</h2>
					<div class="tableBorderArea">
						<c:if test='${getReqlistvo.size() eq 0}'>
          					<div class="tac orderBg">
          						<i class="noOrder"></i>
          						<span class="fc66 f18">신청 내역이 없습니다.</span>
          					</div>
						</c:if>

						<c:if test='${getReqlistvo.size() ne 0}'>
	    				<h2 class="f16 fc11 m-b-12">가상서버</h2>
	        			<table class="detail_Table">
	        				<colgroup>
	        					<c:choose>
								<c:when test="${userApprvState eq 'APPRV_PROCESSING'}">
									<col width="30px">
								</c:when>
								</c:choose>
						 		<col width="75px">
						 		<col width="9%">
						 		<col width="8%">
						 		<col width="8%">
						 		<col width="6%">
						 		<col width="6%">
						 		<col width="6%">
						 		<col width="*">
						 		<col width="12%">
						 		<col width="12%">
						 		<col width="12%">
						 		<col width="75px">
						 		<col width="6%">
			 				</colgroup>
							<thead>
				    			<tr>
				    				<c:choose>
									<c:when test="${userApprvState eq 'APPRV_PROCESSING'}">
										<th></th>
									</c:when>
									</c:choose>
									<th>요청유형</th>
									<th>클라우드</th>
									<th>서버명</th>
									<th>네트워크</th>
									<th>OS</th>
									<th>vCPU (Core)</th>
									<th>MEMORY (GB)</th>
									<th>DISK (GB)</th>
									<th>호스트명</th>
									<th>IP</th>
									<th>백업IP</th>
									<th>작업결과</th>
									<th>상세보기</th>
								</tr>
							</thead>
							<tbody>
								<c:forEach items="${getReqlistvo}" var="getBasketlistvo" varStatus="status" >
								<tr>
				 					<c:choose>
									<c:when test="${userApprvState eq 'APPRV_PROCESSING'}">
									<td class="tac">
										<input type="checkbox" name="projectIdchk" id="${getBasketlistvo.orderProductSeq}" value="${getBasketlistvo.orderProductSeq}" />
									</td>
									</c:when>
									</c:choose>

									<td class="tac onwrap">
										<c:if test="${getBasketlistvo.requestName eq '신규'}">
											<span class="statusLabel_small status_new">신규</span>
										</c:if>
										<c:if test="${getBasketlistvo.requestName eq '변경'}">
											<span class="statusLabel_small status_new">변경</span>
										</c:if>
										<c:if test="${getBasketlistvo.requestName eq '해지'}">
											<span class="statusLabel_small status_out">삭제</span>
										</c:if>
									</td>
									<td class="tal fc11">
										${getBasketlistvo.cloudName}
									</td>
									<td class="tal fc11">
										${getBasketlistvo.hostnameAlias}
									</td>
									<td class="tal fc11">
										${getBasketlistvo.networkAlias}
									</td>
									<td class="tal fc11">
										<a title= "${getBasketlistvo.osProductName}">${getBasketlistvo.osProductName}</a>     
									</td>
									<td class="tac p-0 fontVdn">
									 	${getBasketlistvo.vcpus2}
									 </td>
									 <td class="tac p-0 fontVdn">
									 	${getBasketlistvo.memGb2}
									 </td>
									 <td class="tac p-0 fontVdn">
									 	${getBasketlistvo.vmDiskGb}
									 </td>

									<td class="tal fontVdn">
										<c:forEach items="${getProductAppSteplist}" var="getProductAppSteplist" varStatus="status" >
									        <c:if test="${getProductAppSteplist.stepLevel eq '1' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING'}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}HostName" value="${getBasketlistvo.hostname}" />
												<input readonly  size="10" maxlength="8" value="${getBasketlistvo.hostname}" />
											</c:if>

											<c:if test="${getProductAppSteplist.stepLevel eq '2' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING'}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}HostName" value="${getBasketlistvo.hostname}" />
												<input readonly  size="10" maxlength="8" value="${getBasketlistvo.hostname}" />
											</c:if>

											<c:if test="${getProductAppSteplist.stepLevel eq '3' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING'}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}HostName" value="${getBasketlistvo.hostname}" />
												<input readonly  size="10" maxlength="8" value="${getBasketlistvo.hostname}" />
											</c:if>

											<c:if test="${getProductAppSteplist.stepLevel eq '4' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING'}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}HostName" value="${getBasketlistvo.hostname}" />
												<input readonly  size="10" maxlength="8" value="${getBasketlistvo.hostname}" />
											</c:if>

											<c:if test="${getProductAppSteplist.stepLevel eq '5' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '신규'}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}Ip" value="${getBasketlistvo.hostname}" />
												<input readonly  size="10" maxlength="15" value="${getBasketlistvo.hostname}" />
											</c:if>
											
											<c:if test="${getProductAppSteplist.stepLevel eq '5' and getProductAppSteplist.apprvState eq 'APPRV_UNASSIGNED' and getBasketlistvo.requestName eq '신규'}">
												<c:if test="${getBasketlistvo.hostname eq null}">
													<input name="hostName" size="10" maxlength="8" id="${getBasketlistvo.orderProductSeq}HostName" value="${getBasketlistvo.hostname}" />
													<input type="hidden" name="hostNameChk" id="${getBasketlistvo.orderProductSeq}HostNameChk" value="${getBasketlistvo.hostname !='' && getBasketlistvo.hostname != null?'Y':'N'}" />
													<input type="button" onClick="saveHostNameCheck(document.getElementById('${getBasketlistvo.orderProductSeq}HostName').value,'${getBasketlistvo.orderProductSeq}');" value="저장"/>
												</c:if>
												<c:if test="${getBasketlistvo.hostname ne null}">
													<input type="hidden" id="${getBasketlistvo.orderProductSeq}HostName" value="${getBasketlistvo.hostname}" />
													<input readonly  size="10" maxlength="15" value="${getBasketlistvo.hostname}" />
												    <input style = "backgroud-color: #CBFF75" type = "button" value = "저장"/>
												</c:if>
											</c:if>

											<c:if test="${getProductAppSteplist.stepLevel eq '6' and getBasketlistvo.hostname eq null  and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '신규'}">
												<input name="hostName" size="10" maxlength="8" id="${getBasketlistvo.orderProductSeq}HostName" value="${getBasketlistvo.hostname}" />
												<input type="hidden" name="hostNameChk" id="${getBasketlistvo.orderProductSeq}HostNameChk" value="${getBasketlistvo.hostname !='' && getBasketlistvo.hostname != null?'Y':'N'}" />
												<input type="button" onClick="saveHostNameCheck(document.getElementById('${getBasketlistvo.orderProductSeq}HostName').value,'${getBasketlistvo.orderProductSeq}');" value="저장"/>
											</c:if>

											<c:if test="${getProductAppSteplist.stepLevel eq '6' and getBasketlistvo.hostname ne null and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '신규'}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}HostName" value="${getBasketlistvo.hostname}" />
												<input readonly  size="10" maxlength="15" value="${getBasketlistvo.hostname}" />
											</c:if>

											<c:if test="${getProductAppSteplist.stepLevel eq '7' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '신규'}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}HostName" value="${getBasketlistvo.hostname}" />
												<input readonly  size="10" maxlength="15" value="${getBasketlistvo.hostname}" />
											</c:if>

											<c:if test="${getProductAppSteplist.stepLevel eq '8' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '신규' or  getProductAppSteplist.stepLevel eq '8' and getProductAppSteplist.apprvState eq 'APPRV_COMPLETED' and getBasketlistvo.requestName eq '신규'}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}HostName" value="${getBasketlistvo.hostname}" />
												<input readonly  size="10" maxlength="15" value="${getBasketlistvo.hostname}" />
											</c:if>
											
											<c:if test="${getProductAppSteplist.stepLevel eq '5' and getProductAppSteplist.apprvState eq 'APPRV_UNASSIGNED' and getBasketlistvo.requestName eq '변경'}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}HostName" value="${getBasketlistvo.hostname}" />
												${getBasketlistvo.hostname}
											</c:if>
											<c:if test="${getProductAppSteplist.stepLevel eq '5' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '변경' and getBasketlistvo.hostname ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}HostName" value="${getBasketlistvo.hostname}" />
												${getBasketlistvo.hostname}
											</c:if>
											<c:if test="${getProductAppSteplist.stepLevel eq '6' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '변경' and getBasketlistvo.hostname ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}HostName" value="${getBasketlistvo.hostname}" />
												${getBasketlistvo.hostname}
											</c:if>
											
											<c:if test="${getProductAppSteplist.stepLevel eq '7' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '변경' and getBasketlistvo.hostname ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}HostName" value="${getBasketlistvo.hostname}" />
												${getBasketlistvo.hostname}
											</c:if>
											
											<c:if test="${getProductAppSteplist.stepLevel eq '8' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '변경' and getBasketlistvo.hostname ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}HostName" value="${getBasketlistvo.hostname}" />
												${getBasketlistvo.hostname}
											</c:if>
											
											<c:if test="${getProductAppSteplist.stepLevel eq '5' and getProductAppSteplist.apprvState eq 'APPRV_UNASSIGNED' and getBasketlistvo.requestName eq '해지'}">
												${getBasketlistvo.hostname}
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}HostName" value="${getBasketlistvo.hostname}" />
											</c:if>
											<c:if test="${getProductAppSteplist.stepLevel eq '5' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '해지' and getBasketlistvo.hostname ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}HostName" value="${getBasketlistvo.hostname}" />
												${getBasketlistvo.hostname}
											</c:if>
											<c:if test="${getProductAppSteplist.stepLevel eq '6' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '해지' and getBasketlistvo.hostname ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}HostName" value="${getBasketlistvo.hostname}" />
												${getBasketlistvo.hostname}
											</c:if>
											
											<c:if test="${getProductAppSteplist.stepLevel eq '7' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '해지' and getBasketlistvo.hostname ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}HostName" value="${getBasketlistvo.hostname}" />
												${getBasketlistvo.hostname}
											</c:if>
											
											<c:if test="${getProductAppSteplist.stepLevel eq '8' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '변경' and getBasketlistvo.hostname ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}HostName" value="${getBasketlistvo.hostname}" />
												${getBasketlistvo.hostname}
											</c:if>
											<c:if test="${getProductAppSteplist.stepLevel eq '8' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '해지' and getBasketlistvo.hostname ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}HostName" value="${getBasketlistvo.hostname}" />
												${getBasketlistvo.hostname}
											</c:if>
											
											<c:if test="${getProductAppSteplist.stepLevel eq '8' and getProductAppSteplist.apprvState eq 'APPRV_COMPLETED' and getBasketlistvo.requestName eq '변경' and getBasketlistvo.hostname ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}HostName" value="${getBasketlistvo.hostname}" />
												${getBasketlistvo.hostname}
											</c:if>
											<c:if test="${getProductAppSteplist.stepLevel eq '8' and getProductAppSteplist.apprvState eq 'APPRV_COMPLETED' and getBasketlistvo.requestName eq '해지' and getBasketlistvo.hostname ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}HostName" value="${getBasketlistvo.hostname}" />
												${getBasketlistvo.hostname}
											</c:if>

										</c:forEach>
									</td>

									<td class="tal fontVdn">
										<c:forEach items="${getProductAppSteplist}" var="getProductAppSteplist" varStatus="status" >
									        <c:if test="${getProductAppSteplist.stepLevel eq '1' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING'}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}Ip" value="${getBasketlistvo.defaultNetworkIp}" />
												<input readonly  size="10" maxlength="15" value="${getBasketlistvo.defaultNetworkIp}" />
											</c:if>

											<c:if test="${getProductAppSteplist.stepLevel eq '2' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING'}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}Ip" value="${getBasketlistvo.defaultNetworkIp}" />
												<input readonly  size="10" maxlength="15" value="${getBasketlistvo.defaultNetworkIp}" />
											</c:if>

											<c:if test="${getProductAppSteplist.stepLevel eq '3' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING'}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}Ip" value="${getBasketlistvo.defaultNetworkIp}" />
												<input readonly  size="10" maxlength="15" value="${getBasketlistvo.defaultNetworkIp}" />
											</c:if>


											<c:if test="${getProductAppSteplist.stepLevel eq '4' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING'}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}Ip" value="${getBasketlistvo.defaultNetworkIp}" />
												<input readonly  size="10" maxlength="15" value="${getBasketlistvo.defaultNetworkIp}" />
											</c:if>


											<c:set var="defaultNetworkIpValue" value="${fn:split(getBasketlistvo.networkAlias, '/')}" />
											
											<c:if test="${getProductAppSteplist.stepLevel eq '5' and getProductAppSteplist.apprvState eq 'APPRV_UNASSIGNED' and getBasketlistvo.requestName eq '신규'}">
												<c:if test="${getBasketlistvo.defaultNetworkIp eq null}">
													<input name="ip" size="10" maxlength="15" id="${getBasketlistvo.orderProductSeq}Ip" value="${fn:substring(defaultNetworkIpValue[fn:length(defaultNetworkIpValue)-2], 0, fn:length(defaultNetworkIpValue[fn:length(defaultNetworkIpValue)-2])-1) }" data-orderNo="${getBasketlistvo.orderProductSeq}" data-cloudId="${getBasketlistvo.cloudId}"/>
													<input type="hidden" name="ipChk" id="${getBasketlistvo.orderProductSeq}IpChk" value="${getBasketlistvo.defaultNetworkIp !='' && getBasketlistvo.defaultNetworkIp != null?'Y':'N'}" />
													<input type="button" onClick="saveIpCheck(document.getElementById('${getBasketlistvo.orderProductSeq}Ip').value,'${getBasketlistvo.orderProductSeq}','${getBasketlistvo.cloudId}');" value="저장"/>
												</c:if>
												<c:if test="${getBasketlistvo.defaultNetworkIp ne null}">
													<input type="hidden" id="${getBasketlistvo.orderProductSeq}Ip" value="${getBasketlistvo.defaultNetworkIp}" />
													<input readonly  size="10" maxlength="15" value="${getBasketlistvo.defaultNetworkIp}" />
												</c:if>
											</c:if>

											<c:if test="${getProductAppSteplist.stepLevel eq '5' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '신규'}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}Ip" value="${getBasketlistvo.defaultNetworkIp}" />
												<input readonly  size="10" maxlength="15" value="${getBasketlistvo.defaultNetworkIp}" />
											</c:if>
											
											<c:if test="${getProductAppSteplist.stepLevel eq '6' and getBasketlistvo.defaultNetworkIp eq null and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '신규'}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}Ip" value="${getBasketlistvo.defaultNetworkIp}" />
												<input readonly  size="10" maxlength="15" value="${getBasketlistvo.defaultNetworkIp}" />
											</c:if>
											
											<c:if test="${getProductAppSteplist.stepLevel eq '6' and getBasketlistvo.defaultNetworkIp ne null and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '신규'}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}Ip" value="${getBasketlistvo.defaultNetworkIp}" />
												<input readonly  size="10" maxlength="15" value="${getBasketlistvo.defaultNetworkIp}" />
											</c:if>

											<c:if test="${getProductAppSteplist.stepLevel eq '7' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '신규'}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}Ip" value="${getBasketlistvo.defaultNetworkIp}" />
												<input readonly  size="10" maxlength="15" value="${getBasketlistvo.defaultNetworkIp}" />
											</c:if>

											<c:if test="${getProductAppSteplist.stepLevel eq '8' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '신규' or  getProductAppSteplist.stepLevel eq '8' and getProductAppSteplist.apprvState eq 'APPRV_COMPLETED' and getBasketlistvo.requestName eq '신규'}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}Ip" value="${getBasketlistvo.defaultNetworkIp}" />
												<input readonly  size="10" maxlength="15" value="${getBasketlistvo.defaultNetworkIp}" />
											</c:if>
											<c:if test="${getProductAppSteplist.stepLevel eq '5' and getProductAppSteplist.apprvState eq 'APPRV_UNASSIGNED' and getBasketlistvo.requestName eq '변경' and getBasketlistvo.defaultNetworkIp ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}Ip" value="${getBasketlistvo.defaultNetworkIp}" />
												${getBasketlistvo.defaultNetworkIp}
											</c:if>
											<c:if test="${getProductAppSteplist.stepLevel eq '5' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '변경' and getBasketlistvo.defaultNetworkIp ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}Ip" value="${getBasketlistvo.defaultNetworkIp}" />
												${getBasketlistvo.defaultNetworkIp}
											</c:if>
											<c:if test="${getProductAppSteplist.stepLevel eq '6' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '변경' and getBasketlistvo.defaultNetworkIp ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}Ip" value="${getBasketlistvo.defaultNetworkIp}" />
												${getBasketlistvo.defaultNetworkIp}
											</c:if>
											
											<c:if test="${getProductAppSteplist.stepLevel eq '7' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '변경' and getBasketlistvo.defaultNetworkIp ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}Ip" value="${getBasketlistvo.defaultNetworkIp}" />
												${getBasketlistvo.defaultNetworkIp}
											</c:if>
											
											<c:if test="${getProductAppSteplist.stepLevel eq '8' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '변경' and getBasketlistvo.defaultNetworkIp ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}Ip" value="${getBasketlistvo.defaultNetworkIp}" />
												${getBasketlistvo.defaultNetworkIp}
											</c:if>
											<c:if test="${getProductAppSteplist.stepLevel eq '8' and getProductAppSteplist.apprvState eq 'APPRV_COMPLETED' and getBasketlistvo.requestName eq '변경' and getBasketlistvo.defaultNetworkIp ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}Ip" value="${getBasketlistvo.defaultNetworkIp}" />
												${getBasketlistvo.defaultNetworkIp}
											</c:if>
											
											<c:if test="${getProductAppSteplist.stepLevel eq '5' and getProductAppSteplist.apprvState eq 'APPRV_UNASSIGNED' and getBasketlistvo.requestName eq '해지' and getBasketlistvo.defaultNetworkIp ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}Ip" value="${getBasketlistvo.defaultNetworkIp}" />
												${getBasketlistvo.defaultNetworkIp}
											</c:if>
											<c:if test="${getProductAppSteplist.stepLevel eq '5' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '해지' and getBasketlistvo.defaultNetworkIp ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}Ip" value="${getBasketlistvo.defaultNetworkIp}" />
												${getBasketlistvo.defaultNetworkIp}
											</c:if>
											<c:if test="${getProductAppSteplist.stepLevel eq '6' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '해지' and getBasketlistvo.defaultNetworkIp ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}Ip" value="${getBasketlistvo.defaultNetworkIp}" />
												${getBasketlistvo.defaultNetworkIp}
											</c:if>
											
											<c:if test="${getProductAppSteplist.stepLevel eq '7' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '해지' and getBasketlistvo.defaultNetworkIp ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}Ip" value="${getBasketlistvo.defaultNetworkIp}" />
												${getBasketlistvo.defaultNetworkIp}
											</c:if>
											
											<c:if test="${getProductAppSteplist.stepLevel eq '8' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '해지' and getBasketlistvo.defaultNetworkIp ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}Ip" value="${getBasketlistvo.defaultNetworkIp}" />
												${getBasketlistvo.defaultNetworkIp}
											</c:if>
											<c:if test="${getProductAppSteplist.stepLevel eq '8' and getProductAppSteplist.apprvState eq 'APPRV_COMPLETED' and getBasketlistvo.requestName eq '해지' and getBasketlistvo.defaultNetworkIp ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}Ip" value="${getBasketlistvo.defaultNetworkIp}" />
												${getBasketlistvo.defaultNetworkIp}
											</c:if>
										</c:forEach>
									</td>

									<td class="tal fontVdn">
										<c:set var="backNetworkIpValue" value="${fn:split(getBasketlistvo.backNetworkAlias, '/')}" />
										<c:forEach items="${getProductAppSteplist}" var="getProductAppSteplist" varStatus="status" >
									        <c:if test="${getProductAppSteplist.stepLevel eq '1' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING'}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}BackupIp" value="${getBasketlistvo.backupNetworkIp}" />
												<input readonly  size="10" maxlength="15" value="${getBasketlistvo.backupNetworkIp}" />
											</c:if>

											<c:if test="${getProductAppSteplist.stepLevel eq '2' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING'}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}BackupIp" value="${getBasketlistvo.backupNetworkIp}" />
												<input readonly  size="10" maxlength="15" value="${getBasketlistvo.backupNetworkIp}" />
											</c:if>

									         <c:if test="${getProductAppSteplist.stepLevel eq '3' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName ne '신규'}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}BackupIp" value="${getBasketlistvo.backupNetworkIp}" />
												<input readonly  size="10" maxlength="15" value="${getBasketlistvo.backupNetworkIp}" />
											</c:if>

											<c:if test="${getProductAppSteplist.stepLevel eq '4' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING'}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}BackupIp" value="${getBasketlistvo.backupNetworkIp}" />
												<input readonly  size="10" maxlength="15" value="${getBasketlistvo.backupNetworkIp}" />
											</c:if>

											<c:choose>
												
												<c:when test="${getBasketlistvo.backupNetworkFlag eq 'N'}">
													<c:if test="${getProductAppSteplist.stepLevel eq '5' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '신규'}">
														<input class="dpno" name="backupIp" size="10" maxlength="15" id="${getBasketlistvo.orderProductSeq}BackupIp" value="${getBasketlistvo.backupNetworkIp}" data-orderNo="${getBasketlistvo.orderProductSeq}" data-cloudId="${getBasketlistvo.cloudId}"/>
														<input type="hidden" name="backupIpChk" id="${getBasketlistvo.orderProductSeq}BackupIpChk" value="${getBasketlistvo.backupNetworkFlag == 'N'? 'Y' : (getBasketlistvo.backupNetworkIp !='' && getBasketlistvo.backupNetworkIp != null?'Y':'N')}" />
														<input class="dpno" type="button" onClick="saveBackupIpCheck(document.getElementById('${getBasketlistvo.orderProductSeq}BackupIp').value,'${getBasketlistvo.orderProductSeq}','${getBasketlistvo.cloudId}');" value="저장"/>
													</c:if>
												</c:when>
												<c:otherwise>
													<c:if test="${getProductAppSteplist.stepLevel eq '5' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '신규'}">
														<input type="hidden" id="${getBasketlistvo.orderProductSeq}BackupIp" value="${getBasketlistvo.backupNetworkIp}" />
														<input readonly  size="10" maxlength="15" value="${getBasketlistvo.backupNetworkIp}" />
													</c:if>
													<c:if test="${getProductAppSteplist.stepLevel eq '5' and getProductAppSteplist.apprvState eq 'APPRV_UNASSIGNED' and getBasketlistvo.requestName eq '신규'}">
														<c:if test="${getBasketlistvo.backupNetworkIp eq null}">
															<input name="backupIp" size="10" maxlength="15" id="${getBasketlistvo.orderProductSeq}BackupIp" value="${fn:substring(backNetworkIpValue[fn:length(backNetworkIpValue)-2], 0, fn:length(backNetworkIpValue[fn:length(backNetworkIpValue)-2])-1) }" data-orderNo="${getBasketlistvo.orderProductSeq}" data-cloudId="${getBasketlistvo.cloudId}"/>
															<input type="hidden" name="backupIpChk" id="${getBasketlistvo.orderProductSeq}BackupIpChk" value="${getBasketlistvo.backupNetworkFlag == 'N'? 'Y' : (getBasketlistvo.backupNetworkIp !='' && getBasketlistvo.backupNetworkIp != null?'Y':'N')}" />
															<input type="button" onClick="saveBackupIpCheck(document.getElementById('${getBasketlistvo.orderProductSeq}BackupIp').value,'${getBasketlistvo.orderProductSeq}','${getBasketlistvo.cloudId}');" value="저장"/>
														</c:if>
														<c:if test="${getBasketlistvo.backupNetworkIp ne null}">
															<input type="hidden" id="${getBasketlistvo.orderProductSeq}BackupIp" value="${getBasketlistvo.backupNetworkIp}" />
															<input readonly  size="10" maxlength="15" value="${getBasketlistvo.backupNetworkIp}" />
														</c:if>
													</c:if>
												</c:otherwise>
											</c:choose>

											<c:choose>
												<c:when test="${getBasketlistvo.backupNetworkFlag eq 'N'}">
													<c:if test="${getProductAppSteplist.stepLevel eq '6' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '신규'}">
														<input type="hidden" id="${getBasketlistvo.orderProductSeq}BackupIp" value="${getBasketlistvo.backupNetworkIp}" />
														<input readonly  size="10" maxlength="15" value="${getBasketlistvo.backupNetworkIp}" />
													</c:if>
												</c:when>
												<c:otherwise>
													<c:if test="${getProductAppSteplist.stepLevel eq '6' and getBasketlistvo.backupNetworkIp eq null and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '신규'}">
														<input name="backupIp" size="10" maxlength="15" id="${getBasketlistvo.orderProductSeq}BackupIp" value="${getBasketlistvo.backupNetworkIp}" data-orderNo="${getBasketlistvo.orderProductSeq}" data-cloudId="${getBasketlistvo.cloudId}"/>
														<input type="hidden" name="backupIpChk" id="${getBasketlistvo.orderProductSeq}BackupIpChk" value="${getBasketlistvo.backupNetworkFlag == 'N'? 'Y' : (getBasketlistvo.backupNetworkIp !='' && getBasketlistvo.backupNetworkIp != null?'Y':'N')}" />
														<input type="button" onClick="saveBackupIpCheck(document.getElementById('${getBasketlistvo.orderProductSeq}BackupIp').value,'${getBasketlistvo.orderProductSeq}','${getBasketlistvo.cloudId}');" value="저장"/>
													</c:if>
													<c:if test="${getProductAppSteplist.stepLevel eq '6' and getBasketlistvo.backupNetworkIp ne null and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '신규'}">
														<input type="hidden" id="${getBasketlistvo.orderProductSeq}BackupIp" value="${getBasketlistvo.backupNetworkIp}" />
														<input readonly  size="10" maxlength="15" value="${getBasketlistvo.backupNetworkIp}" />
													</c:if>
												</c:otherwise>
											</c:choose>
											
											<c:if test="${getProductAppSteplist.stepLevel eq '7' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '신규'}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}BackupIp" value="${getBasketlistvo.backupNetworkIp}" />
												<input readonly  size="10" maxlength="15" value="${getBasketlistvo.backupNetworkIp}" />
											</c:if>

											<c:if test="${getProductAppSteplist.stepLevel eq '8' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '신규' or  getProductAppSteplist.stepLevel eq '8' and getProductAppSteplist.apprvState eq 'APPRV_COMPLETED' and getBasketlistvo.requestName eq '신규'}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}BackupIp" value="${getBasketlistvo.backupNetworkIp}" />
												<input readonly  size="10" maxlength="15" value="${getBasketlistvo.backupNetworkIp}" />
											</c:if>
											
											
											<c:if test="${getProductAppSteplist.stepLevel eq '5' and getProductAppSteplist.apprvState eq 'APPRV_UNASSIGNED' and getBasketlistvo.requestName eq '변경' and getBasketlistvo.backupNetworkIp ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}BackupIp" value="${getBasketlistvo.backupNetworkIp}" />
												${getBasketlistvo.backupNetworkIp}
											</c:if>
											<c:if test="${getProductAppSteplist.stepLevel eq '5' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '변경' and getBasketlistvo.backupNetworkIp ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}BackupIp" value="${getBasketlistvo.backupNetworkIp}" />
												${getBasketlistvo.backupNetworkIp}
											</c:if>
											<c:if test="${getProductAppSteplist.stepLevel eq '6' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '변경' and getBasketlistvo.backupNetworkIp ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}BackupIp" value="${getBasketlistvo.backupNetworkIp}" />
												${getBasketlistvo.backupNetworkIp}
											</c:if>
											
											<c:if test="${getProductAppSteplist.stepLevel eq '7' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '변경' and getBasketlistvo.backupNetworkIp ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}BackupIp" value="${getBasketlistvo.backupNetworkIp}" />
												${getBasketlistvo.backupNetworkIp}
											</c:if>
											
											<c:if test="${getProductAppSteplist.stepLevel eq '8' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '변경' and getBasketlistvo.backupNetworkIp ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}BackupIp" value="${getBasketlistvo.backupNetworkIp}" />
												${getBasketlistvo.backupNetworkIp}
											</c:if>
											
											<c:if test="${getProductAppSteplist.stepLevel eq '5' and getProductAppSteplist.apprvState eq 'APPRV_UNASSIGNED' and getBasketlistvo.requestName eq '해지' and getBasketlistvo.backupNetworkIp ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}BackupIp" value="${getBasketlistvo.backupNetworkIp}" />
												${getBasketlistvo.backupNetworkIp}
											</c:if>
											<c:if test="${getProductAppSteplist.stepLevel eq '5' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '해지' and getBasketlistvo.backupNetworkIp ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}BackupIp" value="${getBasketlistvo.backupNetworkIp}" />
												${getBasketlistvo.backupNetworkIp}
											</c:if>
											<c:if test="${getProductAppSteplist.stepLevel eq '6' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '해지' and getBasketlistvo.backupNetworkIp ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}BackupIp" value="${getBasketlistvo.backupNetworkIp}" />
												${getBasketlistvo.backupNetworkIp}
											</c:if>
											
											<c:if test="${getProductAppSteplist.stepLevel eq '7' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '해지' and getBasketlistvo.backupNetworkIp ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}BackupIp" value="${getBasketlistvo.backupNetworkIp}" />
												${getBasketlistvo.backupNetworkIp}
											</c:if>
											
											<c:if test="${getProductAppSteplist.stepLevel eq '8' and getProductAppSteplist.apprvState eq 'APPRV_PROCESSING' and getBasketlistvo.requestName eq '해지' and getBasketlistvo.backupNetworkIp ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}BackupIp" value="${getBasketlistvo.backupNetworkIp}" />
												${getBasketlistvo.backupNetworkIp}
											</c:if>
											<c:if test="${getProductAppSteplist.stepLevel eq '8' and getProductAppSteplist.apprvState eq 'APPRV_COMPLETED' and getBasketlistvo.requestName eq '변경' and getBasketlistvo.backupNetworkIp ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}BackupIp" value="${getBasketlistvo.backupNetworkIp}" />
												${getBasketlistvo.backupNetworkIp}
											</c:if>
											<c:if test="${getProductAppSteplist.stepLevel eq '8' and getProductAppSteplist.apprvState eq 'APPRV_COMPLETED' and getBasketlistvo.requestName eq '해지' and getBasketlistvo.backupNetworkIp ne null}">
												<input type="hidden" id="${getBasketlistvo.orderProductSeq}BackupIp" value="${getBasketlistvo.backupNetworkIp}" />
												${getBasketlistvo.backupNetworkIp}
											</c:if>
										</c:forEach>
									</td>
									<td class="tac">
										<c:if test="${getBasketlistvo.provisioningStatus eq 'PROVISIONING_FAIL'}">
										<a class="statusLabel_small status_new" onclick="alertFailMessage('${fn:replace(fn:replace(getBasketlistvo.provisioningStatusMessage,'\'',''),search,'')}',${getBasketlistvo.orderProductSeq})">실패</a>
										</c:if>
										<c:if test="${getBasketlistvo.provisioningStatus eq 'PROVISIONING_SUCCESS'}">
										<span class="dpin fb fc-blue2")">성공</span>
										</c:if>
										<c:if test="${getBasketlistvo.provisioningStatus eq 'PROVISIONING_END'}">
										<span class="dpin fb fc-blue2")">작업종료</span>
										</c:if>
									</td>
									<td class="lastCol p-0 tac">
										<a type=button type="button" class="cbton bton_lblue" onclick="productDetail('vm','${getBasketlistvo.orderProductSeq}');"><i class="fa fa-search"></i> </a>
									</td>
								</tr>
								<c:set var="amount" value="${amount + getBasketlistvo.amount}" />
								</c:forEach>
							</tbody>
						</table>
						</c:if>
					</div>
					<!-----기본자원 끝------->

					<!-----부가자원  시작------->
					<h2 class="titleBuType01 m-b-15 m-t-40">부가자원</h2>
					<div class="tableBorderArea">
						<!-- 부가자원 - 신청내역 유/무 확인 시작-->
						<c:set value="useitem" var="substr"/>
						<c:choose>
							<c:when test="${getBasketDisklistvo.size() ne 0}">
								<c:set var="substr" value="" />
							</c:when>
							<c:when test="${getBasketNaslistvo.size() ne 0}">
								<c:set var="substr" value="" />
							</c:when>
							<c:when test="${getBasketLblistvo.size() ne 0}">
								<c:set var="substr" value="" />
							</c:when>
							<c:when test="${getBasketSnlistvo.size() ne 0}">
								<c:set var="substr" value="" />
							</c:when>
							<c:when test="${getBasketIplistvo.size() ne 0}">
								<c:set var="substr" value="" />
							</c:when>
						</c:choose>
						<c:if test='${substr ne ""}'>
							<div class="tac orderBg">
			           			<i class="noOrder"></i>
			           			<span class="fc66 f18">신청 내역이 없습니다.</span>
			           		</div>
						</c:if>
						<!-- 부가자원 - 신청내역 유/무 확인 끝-->

						<!-- 부가자원 - 블록디스크 시작-->
						<c:if test='${getBasketDisklistvo.size() ne 0}'>
						<h5 class="f16 fc11 m-b-12">블록디스크</h5>
						<table class="detail_Table m-b-30">
				        	<colgroup>
				        		<c:choose>
									<c:when test="${userApprvState eq 'APPRV_PROCESSING'}">
										<col width="30px">
									</c:when>
								</c:choose>
						 		<col width="75px">
						 		<col width="10%">							 		
						 		<col width="15%">
						 		<col width="*">
						 		<col width="15%">
						 		<col width="10%">
						 		<col width="75px">
						 		<col width="8%">
						 	</colgroup>
							<thead>
							    <tr>
						    		<c:choose>
									<c:when test="${userApprvState eq 'APPRV_PROCESSING'}">
										<th></th>
									</c:when>
									</c:choose>
									<th>요청유형</th>
									<th>클라우드</th>
									<th>서비스희망일시</th>
									<th>디스크명</th>
									<th>크기<span class="fontN fontVdn">(GB)</span></th>
									<th>가상서버</th>
									<th>작업결과</th>
									<th>상세보기</th>
								</tr>
							</thead>
							<tbody>
								<c:forEach items="${getBasketDisklistvo}" var="getBasketDisklistvo" varStatus="status" >
								<tr>
					 				<c:choose>
									<c:when test="${userApprvState eq 'APPRV_PROCESSING'}">
										<td class="tac">
											<input type="checkbox" name="projectIdchk" id="${getBasketDisklistvo.orderProductSeq}" value="${getBasketDisklistvo.orderProductSeq}" />
										</td>
									</c:when>
									</c:choose>
									<td class="tac onwrap">
										<c:if test="${getBasketDisklistvo.requestName eq '신규'}">
											<span class="statusLabel_small status_new">신규</span>
										</c:if>
										<c:if test="${getBasketDisklistvo.requestName eq '변경'}">
											<span class="statusLabel_small status_new">변경</span>
										</c:if>
										<c:if test="${getBasketDisklistvo.requestName eq '해지'}">
											<span class="statusLabel_small status_out">삭제</span>
										</c:if>
									</td>
									<td class="tal fc11">
										${getBasketDisklistvo.cloudName}
									</td>
									<td class="tac">
										<c:choose>
											<c:when test="${getBasketDisklistvo.onDemandFlag eq 'N'}">
												<span class="fontVdn">${getBasketDisklistvo.applyDatetime}</span>
											</c:when>
											<c:otherwise>
												승인완료 후 생성
											</c:otherwise>
										</c:choose>
									</td>
									<td class="tal fc11">
										${getBasketDisklistvo.diskName}
									</td>
									<td class="tac">
										<c:if test="${getBasketDisklistvo.requestName eq '해지'}">
										${getBasketDisklistvo.beforeDiskGb}									
										</c:if>
										<c:if test="${getBasketDisklistvo.requestName eq '변경' or getBasketDisklistvo.requestName eq '신규'}">
										${getBasketDisklistvo.diskGb2}
										</c:if>
									</td>
									<td class="tal fontVdn">
										${getBasketDisklistvo.hostnameAlias}
									</td>
									<td class="tac">
										<c:if test="${getBasketDisklistvo.provisioningStatus eq 'PROVISIONING_FAIL'}">
										<a class="statusLabel_small status_new" onclick="alertFailMessage('${fn:replace(fn:replace(getBasketDisklistvo.provisioningStatusMessage,'\'',''),search,'')}',${getBasketDisklistvo.orderProductSeq})">실패</a>
										</c:if>
										<c:if test="${getBasketDisklistvo.provisioningStatus eq 'PROVISIONING_SUCCESS'}">
										<span class="dpin fb fc-blue2")">성공</span>
										</c:if>
										<c:if test="${getBasketDisklistvo.provisioningStatus eq 'PROVISIONING_END'}">
										<span class="dpin fb fc-blue2")">작업종료</span>
										</c:if>
									</td>
									<td class="p-0 tac lastCol">
										<a type=button type="button" class="cbton bton_lblue" onclick="productDetail('disk','${getBasketDisklistvo.orderProductSeq}');"><i class="fa fa-search"></i></a>
									</td>
								</tr>
								<c:set var="amount" value="${amount + getBasketDisklistvo.amount}" />
								</c:forEach>
							</tbody>
						</table>
						</c:if>
						<!-- 부가자원 - 블록디스크 끝-->

						<!-- 부가자원 - NAS 시작 -->
						<c:if test='${getBasketNaslistvo.size() ne 0}'>
						<h5 class="f20 fc11 m-b-12">NAS</h5>
						<table class="detail_Table m-b-30">
				        	<colgroup>
				        		<c:choose>
								<c:when test="${userApprvState eq 'APPRV_PROCESSING'}">
									<col width="30px">
								</c:when>
								</c:choose>
						 		<col width="10%">
						 		<col width="10%">
						 		<col width="15%">
						 		<col width="*">
						 		<col width="10%">
						 		<col width="8%">
						 		<col width="10%">
						 	</colgroup>
							<thead>
							    <tr>
							    	<c:choose>
									<c:when test="${userApprvState eq 'APPRV_PROCESSING'}">
										<th></th>
									</c:when>
									</c:choose>
									<th>요청유형</th>
									<th>과금단위</th>
									<th>서비스희망일시</th>
									<th>프로젝트명</th>
									<th>용량<span class="fontN fontVdn">(GB)</span></th>
									<th>상세</th>
									<th>작업자지정</th>
								</tr>
							</thead>
							<tbody>
								<c:forEach items="${getBasketNaslistvo}" var="getBasketNaslistvo" varStatus="status" >
								<tr>
						 			<c:choose>
										<c:when test="${userApprvState eq 'APPRV_PROCESSING'}">
											<td class="tac">
												<input type="checkbox" name="projectIdchk" id="${getBasketNaslistvo.orderProductSeq}" value="${getBasketNaslistvo.orderProductSeq}" />
											</td>
										</c:when>
									</c:choose>
									<td class="tac onwrap">
										<c:if test="${getBasketNaslistvo.requestName eq '신규'}">
											<span class="statusLabel_small status_new">신규</span>
										</c:if>
										<c:if test="${getBasketNaslistvo.requestName eq '변경'}">
											<span class="statusLabel_small status_new">변경</span>
										</c:if>
										<c:if test="${getBasketNaslistvo.requestName eq '해지'}">
											<span class="statusLabel_small status_out">삭제</span>
										</c:if>
									</td>
									<td class="tac">
										<c:choose>
											<c:when test="${orderNo eq ''}">
												<c:set var="orderNo" value="${getBasketNaslistvo.orderNo}" />
											</c:when>
											<c:otherwise>
												<c:set var="orderNo" value="${orderNo},${getBasketNaslistvo.orderNo}" />
											</c:otherwise>
										</c:choose>

										<c:choose>
											<c:when test="${getBasketNaslistvo.hourlyFlag eq 'N'}">
												월
											</c:when>
											<c:otherwise>
												시간
											</c:otherwise>
										</c:choose>
									</td>
									<td class="tac">
										<c:choose>
											<c:when test="${getBasketNaslistvo.onDemandFlag eq 'N'}">
												<span class="fontVdn">${getBasketNaslistvo.applyDatetime}</span>
											</c:when>
											<c:otherwise>
												승인완료 후 생성
											</c:otherwise>
										</c:choose>
									</td>
									<td class="tal fc11">
										${getBasketNaslistvo.projectAlias}
									</td>
									<td class="tar fontVdn">
										<fmt:formatNumber value="${getBasketNaslistvo.nasGb}" pattern="#,###"/>
									</td>
									<td class="p-0 tac">
										<a type=button type="button" class="btn_viewDetail" onclick="productDetail('nas','${getBasketNaslistvo.orderProductSeq}');"></a>
										<input type="hidden" id="c${getBasketNaslistvo.orderProductSeq}" name="c${getBasketNaslistvo.orderProductSeq}" value="0" />
									</td>
									<td class="tac onwrap p-0 lastCol">
										<c:choose>
											<c:when test="${stepId eq 'WF1000E0' and userApprvState eq 'APPRV_UNASSIGNED' }">
												<input type="hidden" name="workUserId" id="workUserId" value="${getBasketNaslistvo.workUserName}" readonly />
												<input type="text" name="appointUserName" id="${getBasketNaslistvo.orderProductSeq}UserName" value="${getBasketNaslistvo.workUserName}" readonly style="width: 77px"/>
												<a class="workUserSet" id="${getBasketNaslistvo.orderProductSeq}UserAppoint" name="${getBasketNaslistvo.orderProductSeq}UserAppoint"  onclick="userAppoint('${getBasketNaslistvo.orderProductSeq}','${getBasketNaslistvo.productCategory}')"></a>
											</c:when>
											<c:otherwise>
												<input type="text" name="workUserId" id="workUserId" style="width:117px" value="${getBasketNaslistvo.workUserName}" readonly />
											</c:otherwise>
										</c:choose>
									</td>
								</tr>
								<c:set var="amount" value="${amount + getBasketNaslistvo.amount}" />
								</c:forEach>
							</tbody>
						</table>
						</c:if>
						<!-- 부가자원 - NAS 끝 -->

						<!-- 부가자원 - 서비스 로드분산 시작-->
						<c:if test='${getBasketLblistvo.size() ne 0}'>
						<h5 class="f16 fc11 m-b-12">로드밸런스</h5>
						<table class="detail_Table m-b-30">
				        	<colgroup>
						 		<col width="8%">
						 		<col width="8%">
						 		<col width="15%">
						 		<col width="*">
						 		<col width="8%">
						 		<col width="130px">
						 		<col width="75px">
						 	</colgroup>
							<thead>
							    <tr>
									<th>요청유형</th>
									<th>로드밸런스명</th>
									<th>PORT</th>
									<th>method</th>
									<th>protocol</th>
									<th>작업자지정</th>
									<th>상세</th>
								</tr>
							</thead>
							<tbody>
								<c:forEach items="${getBasketLblistvo}" var="getBasketLblistvo" varStatus="status" >
								<tr>
									<td class="tac onwrap">
										<c:if test="${getBasketLblistvo.requestName eq '신규'}">
											<span class="statusLabel_small status_new">신규</span>
										</c:if>
										<c:if test="${getBasketLblistvo.requestName eq '변경'}">
											<span class="statusLabel_small status_new">변경</span>
										</c:if>
										<c:if test="${getBasketLblistvo.requestName eq '해지'}">
											<span class="statusLabel_small status_out">삭제</span>
										</c:if>
									</td>
									<td class="tac">
										${getBasketLblistvo.loadbalancerName}
									</td>
									<td class="tac">
										${getBasketLblistvo.port}
									</td>
									<td class="tac">
										${getBasketLblistvo.method}
									</td>
									<td class="tac">
										${getBasketLblistvo.protocol}
									</td>

									<td class="tac onwrap p-0">
										<c:choose>
											<c:when test="${stepId eq 'WF1000E0' and userApprvState eq 'APPRV_UNASSIGNED'}">
												<input type="hidden" name="workUserId" id="workUserId" value="${getBasketLblistvo.workUserName}" readonly />
												<input type="text" name="appointUserName" id="${getBasketLblistvo.orderProductSeq}UserName" value="${getBasketLblistvo.workUserName}" readonly style="width: 77px;"/>
												<a class="workUserSet" id="${getBasketLblistvo.orderProductSeq}UserAppoint" name="${getBasketLblistvo.orderProductSeq}UserAppoint" onclick="userAppoint('${getBasketLblistvo.orderProductSeq}','${getBasketLblistvo.productCategory}')"></a>
											</c:when>
											<c:otherwise>
												<input type="text" name="workUserId" id="workUserId" style="width:117px" value="${getBasketLblistvo.workUserName}" readonly />
											</c:otherwise>
										</c:choose>
										<!-- 작업자 상태 -->
									</td>
									<td class="tac p-0 lastCol">
										<a type=button type="button" class="btn_viewDetail" onclick="productDetail('lb','${getBasketLblistvo.orderProductSeq}');"></a>
										<input type="hidden" id="c${getBasketLblistvo.orderProductSeq}" name="c${getBasketLblistvo.orderProductSeq}" value="0" />
									</td>
								</tr>
								<c:set var="amount" value="${amount + getBasketLblistvo.amount}" />
								</c:forEach>
							</tbody>
						</table>
						</c:if>
						<!-- 부가자원 - 서비스 로드분산 끝-->
						
						<!-- 부가자원 - 스냅샷 시작-->
						<c:if test='${getBasketSnlistvo.size() ne 0}'>
						<h5 class="f16 fc11 m-b-12">스냅샷</h5>
						<table class="detail_Table m-b-30">
				        	<colgroup>
						 		<col width="8%">
						 		<col width="8%">
						 		<col width="8%">
						 		<col width="8%">
						 		<col width="15%">
						 		<col width="70px">
						 	</colgroup>
							<thead>
							    <tr>
									<th>요청유형</th>
									<th>가상서버</th>
									<th>스냅샷명</th>
									<th>디스크명</th>
									<th>작업자지정</th>
									<th>상세</th>
								</tr>
							</thead>
							<tbody>
								<c:forEach items="${getBasketSnlistvo}" var="getBasketSnlistvo" varStatus="status" >
								<tr>
									<td class="tac onwrap">
										<c:if test="${getBasketSnlistvo.requestName eq '신규'}">
											<span class="statusLabel_small status_new">신규</span>
										</c:if>
										<c:if test="${getBasketSnlistvo.requestName eq '변경'}">
											<span class="statusLabel_small status_new">변경</span>
										</c:if>
										<c:if test="${getBasketSnlistvo.requestName eq '해지'}">
											<span class="statusLabel_small status_out">삭제</span>
										</c:if>
									</td>
									<td class="tac">
										${getBasketSnlistvo.hostname}
									</td>
									<td class="tac">
										${getBasketSnlistvo.snapshotName}
									</td>
									<td class="tac">
										${getBasketSnlistvo.diskAlias}
									</td>
									<td class="tac onwrap p-0 lastCol">
										<c:choose>
											<c:when test="${stepId eq 'WF1000E0' and userApprvState eq 'APPRV_UNASSIGNED'}">
												<input type="hidden" name="workUserId" id="workUserId" value="${getBasketSnlistvo.workUserName}" readonly />
												<input type="text" name="appointUserName" id="${getBasketSnlistvo.orderProductSeq}UserName" value="${getBasketSnlistvo.workUserName}" readonly style="width: 77px;"/>
												<a class="workUserSet" id="${getBasketSnlistvo.orderProductSeq}UserAppoint" name="${getBasketSnlistvo.orderProductSeq}UserAppoint" onclick="userAppoint('${getBasketSnlistvo.orderProductSeq}','${getBasketSnlistvo.productCategory}')"></a>
											</c:when>
											<c:otherwise>
												<input type="text" name="workUserId" id="workUserId" style="width:117px" value="${getBasketSnlistvo.workUserName}" readonly />
											</c:otherwise>
										</c:choose>
										<!-- 작업자 상태 -->
									</td>
									<td class="tac p-0">
										<a type=button type="button" class="btn_viewDetail" onclick="openPopSn('${getBasketSnlistvo.requestName}','${getBasketSnlistvo.projectAlias}', '${getBasketSnlistvo.snapshotName}', '${getBasketSnlistvo.hostname}', '${getBasketSnlistvo.diskAlias}','${getBasketSnlistvo.description}','${getBasketSnlistvo.applyDatetime}','${getBasketSnlistvo.onDemandFlag}')"></a>
										<input type="hidden" id="c${getBasketSnlistvo.orderProductSeq}" name="c${getBasketSnlistvo.orderProductSeq}" value="0" />
									</td>
								</tr>
								<c:set var="amount" value="${amount + getBasketSnlistvo.amount}" />
								</c:forEach>
							</tbody>
						</table>
						</c:if>
						<!-- 부가자원 - 서비스 로드분산 끝-->

						<!-- 부가자원 - 공인 IP 시작-->
						<c:if test='${getBasketIplistvo.size() ne 0}'>
							<h5 class="f16 fc11 m-b-12">공인 IP</h5>
							<table class="detail_Table">
					        	<colgroup>
					        		<c:choose>
									<c:when test="${userApprvState eq 'APPRV_PROCESSING'}">
										<col width="30px">
									</c:when>
									</c:choose>
							 		<col width="8%">
							 		<col width="8%">
							 		<col width="15%">
							 		<col width="*">
							 		<col width="10%">
							 		<col width="8%">
							 		<col width="15%">
							 	</colgroup>
								<thead>
								    <tr>
								    	<c:choose>
										<c:when test="${userApprvState eq 'APPRV_PROCESSING'}">
											<th></th>
										</c:when>
										</c:choose>
										<th>요청유형</th>
										<th>과금단위</th>
										<th>서비스희망일시</th>
										<th>프로젝트명</th>
										<th>수량<span class="fontN">(식)</span></th>
										<th>상세</th>
										<th>작업자지정</th>
									</tr>
								</thead>
								<tbody>
									<c:forEach items="${getBasketIplistvo}" var="getBasketIplistvo" varStatus="status" >
									<tr>
							 			<c:choose>
										<c:when test="${userApprvState eq 'APPRV_PROCESSING'}">
											<td class="tac">
												<input type="checkbox" name="projectIdchk" id="${getBasketIplistvo.orderProductSeq}" value="${getBasketIplistvo.orderProductSeq}" />
											</td>
										</c:when>
										</c:choose>
										<td class="tac onwrap">
											<c:if test="${getBasketIplistvo.requestName eq '신규'}">
												<span class="statusLabel_small status_new">신규</span>
											</c:if>
											<c:if test="${getBasketIplistvo.requestName eq '변경'}">
												<span class="statusLabel_small status_new">변경</span>
											</c:if>
											<c:if test="${getBasketIplistvo.requestName eq '해지'}">
												<span class="statusLabel_small status_out">삭제</span>
											</c:if>
										</td>
										<td class="tac">
											<c:choose>
											<c:when test="${orderNo eq ''}">
												<c:set var="orderNo" value="${getBasketIplistvo.orderNo}" />
											</c:when>
											<c:otherwise>
												<c:set var="orderNo" value="${orderNo},${getBasketIplistvo.orderNo}" />
											</c:otherwise>
											</c:choose>

											<c:choose>
												<c:when test="${getBasketIplistvo.hourlyFlag eq 'N'}">
													월
												</c:when>
												<c:otherwise>
													시간
												</c:otherwise>
											</c:choose>
										</td>
										<td class="tac">
											<c:choose>
											<c:when test="${getBasketIplistvo.onDemandFlag eq 'N'}">
												<span class="fontVdn">${getBasketIplistvo.applyDatetime}</span>
											</c:when>
											<c:otherwise>
												승인완료 후 생성
											</c:otherwise>
											</c:choose>
										</td>
										<td class="tal fc11">
											${getBasketIplistvo.projectAlias}
										</td>
										<td class="tar fontVdn">
											1
										</td>
										<td class="tac p-0">
											<a type=button type="button" class="btn_viewDetail" onclick="productDetail('ip','${getBasketIplistvo.orderProductSeq}');"></a>
											<input type="hidden" id="c${getBasketIplistvo.orderProductSeq}" name="c${getBasketIplistvo.orderProductSeq}" value="0" />
										</td>
										<td class="tac lastCol p-0 onwrap">
											<c:choose>
											<c:when test="${stepId eq 'WF1000E0' and userApprvState eq 'APPRV_UNASSIGNED'}">
												<input type="hidden" name="workUserId" id="workUserId" value="${getBasketIplistvo.workUserName}" readonly />
												<input type="text" name="appointUserName" id="${getBasketIplistvo.orderProductSeq}UserName" value="${getBasketIplistvo.workUserName}" readonly  style="width: 77px"/>
												<a class="workUserSet" id="${getBasketIplistvo.orderProductSeq}UserAppoint" name="${getBasketIplistvo.orderProductSeq}UserAppoint"  onclick="userAppoint('${getBasketIplistvo.orderProductSeq}','${getBasketIplistvo.productCategory}')"></a>
											</c:when>
											<c:otherwise>
												<input type="text" name="workUserId" id="workUserId" style="width:117px" value="${getBasketIplistvo.workUserName}" readonly />
											</c:otherwise>
											</c:choose>
										</td>
									</tr>
									<c:set var="amount" value="${amount + getBasketIplistvo.amount}" />
									</c:forEach>
								</tbody>
							</table>
						</c:if>
						<!-- 부가자원 - 공인 IP 끝-->
					</div>
					<!-----부가자원  끝 ------->

					<!----- 서비스 시작 ------->
					<h2 class="titleBuType01 m-b-15 m-t-40">서비스</h2>
					<div class="tableBorderArea">
						<!-- 신청없음 -->
						<c:set value="useitem" var="subser"/>
						<c:choose>
							<c:when test="${getReqServicelistvo.size() ne 0}">
								<c:set var="subser" value="" />
							</c:when>
<%-- 								<c:when test="${getBasketScmlistvo.size() ne 0}"> --%>
<%-- 									<c:set var="subser" value="" /> --%>
<%-- 								</c:when> --%>
<%-- 								<c:when test="${getBasketMcalistvo.size() ne 0}"> --%>
<%-- 									<c:set var="subser" value="" /> --%>
<%-- 								</c:when> --%>
<%-- 								<c:when test="${getBasketSerlistvo.size() ne 0}"> --%>
<%-- 									<c:set var="subser" value="" /> --%>
<%-- 								</c:when> --%>
						</c:choose>
						<c:if test='${subser ne ""}'>
							<div class="tac orderBg">
			           			<i class="noOrder"></i>
			           			<span class="fc66 f18">신청 내역이 없습니다.</span>
			           		</div>
						</c:if>
						<!-- 서비스 시작 -->
						<c:if test='${getReqServicelistvo.size() ne 0}'>
							<h5 class="f16 fc11 m-b-12">서비스</h5>
							<table class="detail_Table m-b-30">
					        	<colgroup>
					        		<c:choose>
										<c:when test="${userApprvState eq 'APPRV_PROCESSING'}">
											<col width="30px">
										</c:when>
									</c:choose>
							 		<col width="75px">
							 		<col width="10%">
							 		<col width="10%">
							 		<col width="10%">
							 		<col width="*">
							 		<col width="15%">
							 		<col width="15%">
							 		<col width="8%">
							 	</colgroup>
								<thead>
								    <tr>
								    	<c:choose>
											<c:when test="${userApprvState eq 'APPRV_PROCESSING'}">
												<th></th>
											</c:when>
										</c:choose>
										<th>요청유형</th>
										<th>클라우드</th>
										<th>서비스희망일시</th>
										<th>서비스유형</th>
										<th>서비스명</th>
										<th>자원명</th>
										<th>작업자지정</th>
										<th>상세보기</th>
									</tr>
								</thead>
								<tbody>
									<c:forEach items="${getReqServicelistvo}" var="getReqServicelistvo" varStatus="status" >
										<tr>
								 			<c:choose>
												<c:when test="${userApprvState eq 'APPRV_PROCESSING'}">
													<td class="tac">
														<input type="checkbox" name="projectIdchk" id="${getReqServicelistvo.orderProductSeq}" value="${getReqServicelistvo.orderProductSeq}" />
													</td>
												</c:when>
											</c:choose>
											<td class="tac onwrap">
												<c:if test="${getReqServicelistvo.requestName eq '신규'}">
													<span class="statusLabel_small status_new">신규</span>
												</c:if>
												<c:if test="${getReqServicelistvo.requestName eq '변경'}">
													<span class="statusLabel_small status_new">변경</span>
												</c:if>
												<c:if test="${getReqServicelistvo.requestName eq '해지'}">
													<span class="statusLabel_small status_out">삭제</span>
												</c:if>
											</td>
											
											<td class="tal fc11">
												${getReqServicelistvo.cloudName}
											</td>
											
											<td class="tac">
												<c:choose>
													<c:when test="${getReqServicelistvo.onDemandFlag eq 'N'}">
														<span class="fontVdn">${getReqServicelistvo.applyDatetime}</span>
													</c:when>
													<c:otherwise>
														승인완료 후 생성
													</c:otherwise>
												</c:choose>
											</td>

											<td class="tal fc11">
												${getReqServicelistvo.serviceTypeName}
											</td>

											<td class="tal fc11">
												${getReqServicelistvo.serviceName}
												
											</td>

											<c:choose>
												<c:when test="${getReqServicelistvo.serviceType eq '10'}"><td class="tal fc11"> ${getReqServicelistvo.appName} </td></c:when>
												<c:when test="${getReqServicelistvo.serviceType eq '11'}"><td class="tal fc11"> ${getReqServicelistvo.appName} </td></c:when>
												<c:otherwise><td class="tal"> ${getReqServicelistvo.hostnameAlias} </td></c:otherwise>
											</c:choose>

											<td class="tac p-0 lastCol onwrap">
												<c:choose>
													<c:when test="${stepId eq 'WF1000E0' and userApprvState eq 'APPRV_UNASSIGNED'}">
														<input type="hidden" name="workUserId" id="workUserId" value="${getReqServicelistvo.workUserName}" readonly />
														<input type="text" name="appointUserName" id="${getReqServicelistvo.orderProductSeq}UserName" value="${getReqServicelistvo.workUserName}" readonly  style="width: 77px"/>
														<a class="workUserSet" id="${getReqServicelistvo.orderProductSeq}UserAppoint" name="${getReqServicelistvo.orderProductSeq}UserAppoint"  onclick="userAppoint('${getReqServicelistvo.orderProductSeq}','${getReqServicelistvo.productCategory}')"></a>
													</c:when>
													<c:otherwise>

														<input type="text" name="workUserId" id="workUserId" style="width:117px" value="${getReqServicelistvo.workUserName}" readonly />
													</c:otherwise>
												</c:choose>
											</td>

											<td class="tac p-0">
												<a type=button type="button" class="cbton bton_lblue" onclick="productDetail('service','${getReqServicelistvo.orderProductSeq}');"><i class="fa fa-search"></i> </a>
												<input type="hidden" id="c${getReqServicelistvo.orderProductSeq}" name="c${getReqServicelistvo.orderProductSeq}" value="0" />
											</td>

										</tr>
										<c:set var="amount" value="${amount + getReqServicelistvo.amount}" />
									</c:forEach>
								</tbody>
							</table>
						</c:if>
						<!-- 서비스 끝 -->
						<!-- 백업 서비스 -->
<%-- 							<c:if test='${getBasketBaklistvo.size() ne 0}'> --%>
<!-- 								<h5 class="f16 fc11 m-b-12">백업 서비스</h5> -->
<!-- 								<table class="detail_Table m-b-30"> -->
<%-- 						        	<colgroup> --%>
<%-- 						        		<c:choose> --%>
<%-- 											<c:when test="${userApprvState eq 'APPRV_PROCESSING'}"> --%>
<%-- 												<col width="30px"> --%>
<%-- 											</c:when> --%>
<%-- 										</c:choose> --%>
<%-- 								 		<col width="8%"> --%>
<%-- 								 		<col width="8%"> --%>
<%-- 								 		<col width="15%"> --%>
<%-- 								 		<col width="*"> --%>
<%-- 								 		<col width="8%"> --%>
<%-- 								 		<col width="8%"> --%>
<%-- 								 		<col width="15%"> --%>
<%-- 								 	</colgroup> --%>
<!-- 									<thead> -->
<!-- 									    <tr> -->
<%-- 									    	<c:choose> --%>
<%-- 												<c:when test="${userApprvState eq 'APPRV_PROCESSING'}"> --%>
<!-- 													<th></th> -->
<%-- 												</c:when> --%>
<%-- 											</c:choose> --%>
<!-- 											<th>요청유형</th> -->
<!-- 											<th>과금단위</th> -->
<!-- 											<th>서비스희망일시</th> -->
<!-- 											<th>프로젝트명</th> -->
<!-- 											<th>용량<span class="fontN fontVdn">(GB)</span></th> -->
<!-- 											<th>상세</th> -->
<!-- 											<th>작업자지정</th> -->
<!-- 										</tr> -->
<!-- 									</thead> -->
<!-- 									<tbody> -->
<%-- 										<c:forEach items="${getBasketBaklistvo}" var="getBasketBaklistvo" varStatus="status" > --%>
<!-- 											<tr> -->
<%-- 									 			<c:choose> --%>
<%-- 													<c:when test="${userApprvState eq 'APPRV_PROCESSING'}"> --%>
<!-- 														<td class="tac"> -->
<%-- 															<input type="checkbox" name="projectIdchk" id="${getBasketBaklistvo.orderProductSeq}" value="${getBasketBaklistvo.orderProductSeq}" /> --%>
<!-- 														</td> -->
<%-- 													</c:when> --%>
<%-- 												</c:choose> --%>
<!-- 												<td class="tac onwrap"> -->
<%-- 													<c:if test="${getBasketBaklistvo.requestName eq '신규'}"> --%>
<!-- 														<span class="statusLabel_small status_new">신규</span> -->
<%-- 													</c:if> --%>
<%-- 													<c:if test="${getBasketBaklistvo.requestName eq '변경'}"> --%>
<!-- 														<span class="statusLabel_small status_new">변경</span> -->
<%-- 													</c:if> --%>
<%-- 													<c:if test="${getBasketBaklistvo.requestName eq '해지'}"> --%>
<!-- 														<span class="statusLabel_small status_out">삭제</span> -->
<%-- 													</c:if> --%>
<!-- 												</td> -->
<!-- 												<td class="tac"> -->
<%-- 													<c:choose> --%>
<%-- 														<c:when test="${orderNo eq ''}"> --%>
<%-- 															<c:set var="orderNo" value="${getBasketBaklistvo.orderNo}" /> --%>
<%-- 														</c:when> --%>
<%-- 														<c:otherwise> --%>
<%-- 															<c:set var="orderNo" value="${orderNo},${getBasketBaklistvo.orderNo}" /> --%>
<%-- 														</c:otherwise> --%>
<%-- 													</c:choose> --%>

<%-- 													<c:choose> --%>
<%-- 														<c:when test="${getBasketBaklistvo.hourlyFlag eq 'N'}"> --%>
<!-- 															월 -->
<%-- 														</c:when> --%>
<%-- 														<c:otherwise> --%>
<!-- 															시간 -->
<%-- 														</c:otherwise> --%>
<%-- 													</c:choose> --%>
<!-- 												</td> -->
<!-- 												<td class="tac"> -->
<%-- 													<c:choose> --%>
<%-- 														<c:when test="${getBasketBaklistvo.onDemandFlag eq 'N'}"> --%>
<%-- 															<span class="fontVdn">${getBasketBaklistvo.applyDatetime}</span> --%>
<%-- 														</c:when> --%>
<%-- 														<c:otherwise> --%>
<!-- 															승인완료 후 생성 -->
<%-- 														</c:otherwise> --%>
<%-- 													</c:choose> --%>
<!-- 												</td> -->
<!-- 												<td class="tal fc11"> -->
<%-- 													${getBasketBaklistvo.projectAlias} --%>
<!-- 												</td> -->
<!-- 												<td class="tar fontVdn"> -->
<!-- 													37,000 -->
<!-- 												</td> -->
<!-- 												<td class="tac p-0"> -->
<%-- 													<a type=button type="button" class="btn_viewDetail" onclick="productDetail('bak','${getBasketBaklistvo.orderProductSeq}');"></a> --%>
<%-- 													<input type="hidden" id="c${getBasketBaklistvo.orderProductSeq}" name="c${getBasketBaklistvo.orderProductSeq}" value="0" /> --%>
<!-- 												</td> -->
<!-- 												<td class="tac p-0 lastCol onwrap"> -->
<%-- 													<c:choose> --%>
<%-- 														<c:when test="${stepId eq 'WF1000E0' and userApprvState eq 'APPRV_PROCESSING'}"> --%>
<%-- 															<input type="hidden" name="workUserId" id="workUserId" value="${getBasketBaklistvo.workUserName}" readonly /> --%>
<%-- 															<input type="text" name="appointUserName" id="${getBasketBaklistvo.orderProductSeq}UserName" value="${getBasketBaklistvo.workUserName}" readonly  style="width: 77px"/> --%>
<%-- 															<a class="workUserSet" id="${getBasketBaklistvo.orderProductSeq}UserAppoint" name="${getBasketBaklistvo.orderProductSeq}UserAppoint"  onclick="userAppoint('${getBasketBaklistvo.orderProductSeq}','${getBasketBaklistvo.productCategory}')"></a> --%>
<%-- 														</c:when> --%>
<%-- 														<c:otherwise> --%>
<%-- 															<input type="text" name="workUserId" id="workUserId" style="width:117px" value="${getBasketBaklistvo.workUserName}" readonly /> --%>
<%-- 														</c:otherwise> --%>
<%-- 													</c:choose> --%>
<!-- 													작업자 상태 -->
<!-- 												</td> -->
<!-- 											</tr> -->
<%-- 											<c:set var="amount" value="${amount + getBasketBaklistvo.amount}" /> --%>
<%-- 										</c:forEach> --%>
<!-- 									</tbody> -->
<!-- 								</table> -->
<%-- 							</c:if> --%>

						<!-- 형상관리 서비스 -->
<%-- 							<c:if test='${getBasketScmlistvo.size() ne 0}'> --%>
<!-- 								<h5 class="f16 fc11 m-b-12">형상관리 서비스</h5> -->
<!-- 								<table class="detail_Table m-b-30"> -->
<%-- 						        	<colgroup> --%>
<%-- 						        		<c:choose> --%>
<%-- 											<c:when test="${userApprvState eq 'APPRV_PROCESSING'}"> --%>
<%-- 												<col width="30px"> --%>
<%-- 											</c:when> --%>
<%-- 										</c:choose> --%>
<%-- 								 		<col width="8%"> --%>
<%-- 								 		<col width="8%"> --%>
<%-- 								 		<col width="15%"> --%>
<%-- 								 		<col width="*"> --%>
<%-- 								 		<col width="8%"> --%>
<%-- 								 		<col width="8%"> --%>
<%-- 								 		<col width="15%"> --%>
<%-- 								 	</colgroup> --%>
<!-- 									<thead> -->
<!-- 									    <tr> -->
<%-- 									    	<c:choose> --%>
<%-- 												<c:when test="${userApprvState eq 'APPRV_PROCESSING'}"> --%>
<!-- 													<th></th> -->
<%-- 												</c:when> --%>
<%-- 											</c:choose> --%>
<!-- 											<th>요청유형</th> -->
<!-- 											<th>과금단위</th> -->
<!-- 											<th>서비스희망일시</th> -->
<!-- 											<th>프로젝트명</th> -->
<!-- 											<th>수량<span class="fontN">(식)</span></th> -->
<!-- 											<th>상세</th> -->
<!-- 											<th>작업자지정</th> -->
<!-- 										</tr> -->
<!-- 									</thead> -->
<!-- 									<tbody> -->
<%-- 										<c:forEach items="${getBasketScmlistvo}" var="getBasketScmlistvo" varStatus="status" > --%>
<!-- 											<tr> -->
<%-- 									 			<c:choose> --%>
<%-- 													<c:when test="${userApprvState eq 'APPRV_PROCESSING'}"> --%>
<!-- 														<td class="tac"> -->
<%-- 															<input type="checkbox" name="projectIdchk" id="${getBasketScmlistvo.orderProductSeq}" value="${getBasketScmlistvo.orderProductSeq}" /> --%>
<!-- 														</td> -->
<%-- 													</c:when> --%>
<%-- 												</c:choose> --%>
<!-- 												<td class="tac onwrap"> -->
<%-- 													<c:if test="${getBasketScmlistvo.requestName eq '신규'}"> --%>
<!-- 														<span class="statusLabel_small status_new">신규</span> -->
<%-- 													</c:if> --%>
<%-- 													<c:if test="${getBasketScmlistvo.requestName eq '변경'}"> --%>
<!-- 														<span class="statusLabel_small status_new">변경</span> -->
<%-- 													</c:if> --%>
<%-- 													<c:if test="${getBasketScmlistvo.requestName eq '해지'}"> --%>
<!-- 														<span class="statusLabel_small status_out">삭제</span> -->
<%-- 													</c:if> --%>
<!-- 												</td> -->
<!-- 												<td class="tac"> -->
<%-- 													<c:choose> --%>
<%-- 														<c:when test="${orderNo eq ''}"> --%>
<%-- 															<c:set var="orderNo" value="${getBasketScmlistvo.orderNo}" /> --%>
<%-- 														</c:when> --%>
<%-- 														<c:otherwise> --%>
<%-- 															<c:set var="orderNo" value="${orderNo},${getBasketScmlistvo.orderNo}" /> --%>
<%-- 														</c:otherwise> --%>
<%-- 													</c:choose> --%>

<%-- 													<c:choose> --%>
<%-- 														<c:when test="${getBasketScmlistvo.hourlyFlag eq 'N'}"> --%>
<!-- 															월 -->
<%-- 														</c:when> --%>
<%-- 														<c:otherwise> --%>
<!-- 															시간 -->
<%-- 														</c:otherwise> --%>
<%-- 													</c:choose> --%>
<!-- 												</td> -->
<!-- 												<td class="tac"> -->
<%-- 													<c:choose> --%>
<%-- 														<c:when test="${getBasketScmlistvo.onDemandFlag eq 'N'}"> --%>
<%-- 															<span class="fontVdn">${getBasketScmlistvo.applyDatetime}</span> --%>
<%-- 														</c:when> --%>
<%-- 														<c:otherwise> --%>
<!-- 															승인완료 후 생성 -->
<%-- 														</c:otherwise> --%>
<%-- 													</c:choose> --%>
<!-- 												</td> -->
<!-- 												<td class="tal fc11"> -->
<%-- 													${getBasketScmlistvo.projectAlias} --%>
<!-- 												</td> -->
<!-- 												<td class="tar fontVdn"> -->
<!-- 													1 -->
<!-- 												</td> -->
<!-- 												<td class="tac p-0"> -->
<%-- 													<a type=button type="button" class="btn_viewDetail" onclick="productDetail('scm','${getBasketScmlistvo.orderProductSeq}');"></a> --%>
<%-- 													<input type="hidden" id="c${getBasketScmlistvo.orderProductSeq}" name="c${getBasketScmlistvo.orderProductSeq}" value="0" /> --%>
<!-- 												</td> -->
<!-- 												<td class="tac p-0 lastCol onwrap"> -->
<%-- 													<c:choose> --%>
<%-- 														<c:when test="${stepId eq 'WF1000E0' and userApprvState eq 'APPRV_PROCESSING'}"> --%>
<%-- 															<input type="hidden" name="workUserId" id="workUserId" value="${getBasketScmlistvo.workUserName}" readonly /> --%>
<%-- 															<input type="text" name="appointUserName" id="${getBasketScmlistvo.orderProductSeq}UserName" value="${getBasketScmlistvo.workUserName}" readonly style="width: 77px;"/> --%>
<%-- 															<a class="workUserSet" id="${getBasketScmlistvo.orderProductSeq}UserAppoint" name="${getBasketScmlistvo.orderProductSeq}UserAppoint"  onclick="userAppoint('${getBasketScmlistvo.orderProductSeq}','${getBasketScmlistvo.productCategory}')"></a> --%>
<%-- 														</c:when> --%>
<%-- 														<c:otherwise> --%>
<%-- 															<input type="text" name="workUserId" id="workUserId" style="width:117px" value="${getBasketScmlistvo.workUserName}" readonly /> --%>
<%-- 														</c:otherwise> --%>
<%-- 													</c:choose> --%>
<!-- 												</td> -->
<!-- 											</tr> -->
<%-- 											<c:set var="amount" value="${amount + getBasketScmlistvo.amount}" /> --%>
<%-- 										</c:forEach> --%>
<!-- 									</tbody> -->
<!-- 								</table> -->
<%-- 							</c:if> --%>

						<!-- 대외계 서비스 -->
<%-- 							<c:if test='${getBasketMcalistvo.size() ne 0}'> --%>
<!-- 								<h5 class="f16 fc11 m-b-12">대외계 서비스</h5> -->
<!-- 								<table class="detail_Table m-b-30"> -->
<%-- 						        	<colgroup> --%>
<%-- 						        		<c:choose> --%>
<%-- 											<c:when test="${userApprvState eq 'APPRV_PROCESSING'}"> --%>
<%-- 												<col width="30px"> --%>
<%-- 											</c:when> --%>
<%-- 										</c:choose> --%>
<%-- 								 		<col width="8%"> --%>
<%-- 								 		<col width="8%"> --%>
<%-- 								 		<col width="15%"> --%>
<%-- 								 		<col width="*"> --%>
<%-- 								 		<col width="8%"> --%>
<%-- 								 		<col width="8%"> --%>
<%-- 								 		<col width="15%"> --%>
<%-- 								 	</colgroup> --%>
<!-- 									<thead> -->
<!-- 									    <tr> -->
<%-- 									    	<c:choose> --%>
<%-- 												<c:when test="${userApprvState eq 'APPRV_PROCESSING'}"> --%>
<!-- 													<th></th> -->
<%-- 												</c:when> --%>
<%-- 											</c:choose> --%>
<!-- 											<th>요청유형</th> -->
<!-- 											<th>과금단위</th> -->
<!-- 											<th>서비스희망일시</th> -->
<!-- 											<th>프로젝트명</th> -->
<!-- 											<th>수량<span class="fontN">(식)</span></th> -->
<!-- 											<th>상세</th> -->
<!-- 											<th>작업자지정</th> -->
<!-- 										</tr> -->
<!-- 									</thead> -->
<%-- 										<c:forEach items="${getBasketMcalistvo}" var="getBasketMcalistvo" varStatus="status" > --%>
<!-- 											<tr> -->
<%-- 									 			<c:choose> --%>
<%-- 													<c:when test="${userApprvState eq 'APPRV_PROCESSING'}"> --%>
<!-- 														<td class="tac"> -->
<%-- 															<input type="checkbox" name="projectIdchk" id="${getBasketMcalistvo.orderProductSeq}" value="${getBasketMcalistvo.orderProductSeq}" /> --%>
<!-- 														</td> -->
<%-- 													</c:when> --%>
<%-- 												</c:choose> --%>
<!-- 												<td class="tac onwrap"> -->
<%-- 													<c:if test="${getBasketMcalistvo.requestName eq '신규'}"> --%>
<!-- 														<span class="statusLabel_small status_new">신규</span> -->
<%-- 													</c:if> --%>
<%-- 													<c:if test="${getBasketMcalistvo.requestName eq '변경'}"> --%>
<!-- 														<span class="statusLabel_small status_new">변경</span> -->
<%-- 													</c:if> --%>
<%-- 													<c:if test="${getBasketMcalistvo.requestName eq '해지'}"> --%>
<!-- 														<span class="statusLabel_small status_out">삭제</span> -->
<%-- 													</c:if> --%>
<!-- 												</td> -->
<!-- 												<td class="tac"> -->
<%-- 													<c:choose> --%>
<%-- 														<c:when test="${orderNo eq ''}"> --%>
<%-- 															<c:set var="orderNo" value="${getBasketMcalistvo.orderNo}" /> --%>
<%-- 														</c:when> --%>
<%-- 														<c:otherwise> --%>
<%-- 															<c:set var="orderNo" value="${orderNo},${getBasketMcalistvo.orderNo}" /> --%>
<%-- 														</c:otherwise> --%>
<%-- 													</c:choose> --%>

<%-- 													<c:choose> --%>
<%-- 														<c:when test="${getBasketMcalistvo.hourlyFlag eq 'N'}"> --%>
<!-- 															월 -->
<%-- 														</c:when> --%>
<%-- 														<c:otherwise> --%>
<!-- 															시간 -->
<%-- 														</c:otherwise> --%>
<%-- 													</c:choose> --%>
<!-- 												</td> -->
<!-- 												<td class="tac"> -->
<%-- 													<c:choose> --%>
<%-- 														<c:when test="${getBasketMcalistvo.onDemandFlag eq 'N'}"> --%>
<%-- 															<span class="fontVdn">${getBasketMcalistvo.applyDatetime}</span> --%>
<%-- 														</c:when> --%>
<%-- 														<c:otherwise> --%>
<!-- 															승인완료 후 생성 -->
<%-- 														</c:otherwise> --%>
<%-- 													</c:choose> --%>
<!-- 												</td> -->
<!-- 												<td class="tac fc11"> -->
<%-- 													${getBasketMcalistvo.projectAlias} --%>
<!-- 												</td> -->
<!-- 												<td class="tar fontVdn"> -->
<!-- 													1 -->
<!-- 												</td> -->
<!-- 												<td class="tac p-0"> -->
<%-- 													<a type=button type="button" class="btn_viewDetail" onclick="productDetail('mca','${getBasketMcalistvo.orderProductSeq}');"></a> --%>
<%-- 													<input type="hidden" id="c${getBasketMcalistvo.orderProductSeq}" name="c${getBasketMcalistvo.orderProductSeq}" value="0" /> --%>
<!-- 												</td> -->
<!-- 												<td class="tac p-0 lastCol onwrap"> -->
<%-- 													<c:choose> --%>
<%-- 														<c:when test="${stepId eq 'WF1000E0' and userApprvState eq 'APPRV_PROCESSING'}"> --%>
<%-- 															<input type="hidden" name="workUserId" id="workUserId" value="${getBasketMcalistvo.workUserName}" readonly /> --%>
<%-- 															<input type="text" name="appointUserName" id="${getBasketMcalistvo.orderProductSeq}UserName" value="${getBasketMcalistvo.workUserName}" readonly  style="width: 77px"/> --%>
<%-- 															<a class="workUserSet" id="${getBasketMcalistvo.orderProductSeq}UserAppoint" name="${getBasketMcalistvo.orderProductSeq}UserAppoint"  onclick="userAppoint('${getBasketMcalistvo.orderProductSeq}','${getBasketMcalistvo.productCategory}')"></a> --%>
<%-- 														</c:when> --%>
<%-- 														<c:otherwise> --%>
<%-- 															<input type="text" name="workUserId" id="workUserId" style="width:117px" value="${getBasketMcalistvo.workUserName}" readonly /> --%>
<%-- 														</c:otherwise> --%>
<%-- 													</c:choose> --%>
<!-- 												</td> -->
<!-- 											</tr> -->
<%-- 											<c:set var="amount" value="${amount + getBasketMcalistvo.amount}" /> --%>
<%-- 										</c:forEach> --%>
<!-- 									<tbody> -->
<!-- 									</tbody> -->
<!-- 								</table> -->
<%-- 							</c:if> --%>

						<!-- 보안관제 서비스 -->
<%-- 							<c:if test='${getBasketSerlistvo.size() ne 0}'> --%>
<!-- 								<h5 class="f16 fc11 m-b-12 m-t-30">보안관제 서비스</h5> -->
<!-- 								<table class="detail_Table"> -->
<%-- 						        	<colgroup> --%>
<%-- 						        		<c:choose> --%>
<%-- 											<c:when test="${userApprvState eq 'APPRV_PROCESSING'}"> --%>
<%-- 												<col width="30px"> --%>
<%-- 											</c:when> --%>
<%-- 										</c:choose> --%>
<%-- 								 		<col width="8%"> --%>
<%-- 								 		<col width="8%"> --%>
<%-- 								 		<col width="15%"> --%>
<%-- 								 		<col width="*"> --%>
<%-- 								 		<col width="8%"> --%>
<%-- 								 		<col width="8%"> --%>
<%-- 								 		<col width="15%"> --%>
<%-- 								 	</colgroup> --%>
<!-- 									<thead> -->
<!-- 									    <tr> -->
<%-- 									    	<c:choose> --%>
<%-- 												<c:when test="${userApprvState eq 'APPRV_PROCESSING'}"> --%>
<!-- 													<th></th> -->
<%-- 												</c:when> --%>
<%-- 											</c:choose> --%>
<!-- 											<th>요청유형</th> -->
<!-- 											<th>과금단위</th> -->
<!-- 											<th>서비스희망일시</th> -->
<!-- 											<th>프로젝트명</th> -->
<!-- 											<th>수량<span class="fontN">(식)</span></th> -->
<!-- 											<th>상세</th> -->
<!-- 											<th>작업자지정</th> -->
<!-- 										</tr> -->
<!-- 									</thead> -->
<!-- 									<tbody> -->
<%-- 										<c:forEach items="${getBasketSerlistvo}" var="getBasketSerlistvo" varStatus="status" > --%>
<!-- 											<tr> -->
<%-- 									 			<c:choose> --%>
<%-- 													<c:when test="${userApprvState eq 'APPRV_PROCESSING'}"> --%>
<!-- 														<td class="tac"> -->
<%-- 															<input type="checkbox" name="projectIdchk" id="${getBasketSerlistvo.orderProductSeq}" value="${getBasketSerlistvo.orderProductSeq}" /> --%>
<!-- 														</td> -->
<%-- 													</c:when> --%>
<%-- 												</c:choose> --%>
<!-- 												<td class="tac onwrap"> -->
<%-- 													<c:if test="${getBasketSerlistvo.requestName eq '신규'}"> --%>
<!-- 														<span class="statusLabel_small status_new">신규</span> -->
<%-- 													</c:if> --%>
<%-- 													<c:if test="${getBasketSerlistvo.requestName eq '변경'}"> --%>
<!-- 														<span class="statusLabel_small status_new">변경</span> -->
<%-- 													</c:if> --%>
<%-- 													<c:if test="${getBasketSerlistvo.requestName eq '해지'}"> --%>
<!-- 														<span class="statusLabel_small status_out">삭제</span> -->
<%-- 													</c:if> --%>
<!-- 												</td> -->
<!-- 												<td class="tac"> -->
<%-- 													<c:choose> --%>
<%-- 														<c:when test="${orderNo eq ''}"> --%>
<%-- 															<c:set var="orderNo" value="${getBasketSerlistvo.orderNo}" /> --%>
<%-- 														</c:when> --%>
<%-- 														<c:otherwise> --%>
<%-- 															<c:set var="orderNo" value="${orderNo},${getBasketSerlistvo.orderNo}" /> --%>
<%-- 														</c:otherwise> --%>
<%-- 													</c:choose> --%>

<%-- 													<c:choose> --%>
<%-- 														<c:when test="${getBasketSerlistvo.hourlyFlag eq 'N'}"> --%>
<!-- 															월 -->
<%-- 														</c:when> --%>
<%-- 														<c:otherwise> --%>
<!-- 															시간 -->
<%-- 														</c:otherwise> --%>
<%-- 													</c:choose> --%>
<!-- 												</td> -->
<!-- 												<td class="tac"> -->
<%-- 													<c:choose> --%>
<%-- 														<c:when test="${getBasketSerlistvo.onDemandFlag eq 'N'}"> --%>
<%-- 															<span class="fontVdn">${getBasketSerlistvo.applyDatetime}</span> --%>
<%-- 														</c:when> --%>
<%-- 														<c:otherwise> --%>
<!-- 															승인완료 후 생성 -->
<%-- 														</c:otherwise> --%>
<%-- 													</c:choose> --%>
<!-- 												</td> -->
<!-- 												<td class="tal fc11"> -->
<%-- 													${getBasketSerlistvo.projectAlias} --%>
<!-- 												</td> -->
<!-- 												<td class="tar fontVdn"> -->
<!-- 													1 -->
<!-- 												</td> -->
<!-- 												<td class="tac p-0"> -->
<%-- 													<a type=button type="button" class="btn_viewDetail" onclick="productDetail('scr','${getBasketSerlistvo.orderProductSeq}');"></a> --%>
<%-- 													<input type="hidden" id="c${getBasketSerlistvo.orderProductSeq}" name="c${getBasketSerlistvo.orderProductSeq}" value="0" /> --%>
<!-- 												</td> -->
<!-- 												<td class="tac p-0 lastCol onwarp"> -->
<%-- 												<c:choose> --%>
<%-- 													<c:when test="${stepId eq 'WF1000E0' and userApprvState eq 'APPRV_PROCESSING'}"> --%>
<%-- 														<input type="hidden" name="workUserId" id="workUserId" value="${getBasketSerlistvo.workUserName}" readonly /> --%>
<%-- 														<input type="text" name="appointUserName" id="${getBasketSerlistvo.orderProductSeq}UserName" value="${getBasketSerlistvo.workUserName}" readonly style="width: 77px"/> --%>
<%-- 														<a class="workUserSet" id="${getBasketSerlistvo.orderProductSeq}UserAppoint" name="${getBasketSerlistvo.orderProductSeq}UserAppoint" onclick="userAppoint('${getBasketSerlistvo.orderProductSeq}','${getBasketSerlistvo.productCategory}')"></a> --%>
<%-- 													</c:when> --%>
<%-- 													<c:otherwise> --%>
<%-- 														<input type="text" name="workUserId" id="workUserId" style="width:117px" value="${getBasketSerlistvo.workUserName}" readonly /> --%>
<%-- 													</c:otherwise> --%>
<%-- 												</c:choose> --%>
<!-- 												</td> -->
<!-- 											</tr> -->
<%-- 											<c:set var="amount" value="${amount + getBasketSerlistvo.amount}" /> --%>
<%-- 										</c:forEach> --%>
<!-- 									</tbody> -->
<!-- 								</table> -->
<%-- 							</c:if> --%>

						
						<!-----부가자원 끝---------->
					</div>
					<!----- 서비스 끝 ------->

				</div>
				<!-- begin page-body 자원상세목록  -->
				<!-- begin page-body 승인요약금액  -->
				<table class="sumtableV mt20">
					<thead>
		      	  		<tr>
		      	  			<th>자원구분</th>
		      	  			<th>신청</th>
		      	  			<th>변경</th>
		      	  			<th>삭제</th>
		      	  			<!-- <th>금액</th>-->
		      	  		</tr>
		      	 	</thead>
		      	 	<tbody>

		      	 	 <c:if test="${vmNew ne 0 or vmCh ne 0 or vmEx ne 0}">
		      	 		<tr>
		      	 			<td class=" tac" scope="row">기본자원</td>
							<td class=" tac nanumR">${vmNew}</td>
							<td class=" tac nanumR">${vmCh}</td>
							<td class=" tac nanumR">${vmEx}</td>
							<!-- <td class=" tar nanumR fc-blue pr30"><fmt:formatNumber value="${vmAmount}" pattern="#,###"/><span class="fc11">&nbsp;원</span></td>-->
		      	 		</tr>
		      	 	  </c:if>

		      	 	  <c:if test="${subNew ne 0 or subCh ne 0 or subEx ne 0}">
		      	 		<tr class="">
							<td class=" tac" scope="row">부가자원</td>
							<td class=" tac nanumR">${subNew}</td>
							<td class=" tac nanumR">${subCh}</td>
							<td class=" tac nanumR">${subEx}</td>
							<!-- <td class=" tar nanumR fc-blue pr30"><fmt:formatNumber value="${subAmount}" pattern="#,###"/><span class="fc11">&nbsp;원</span></td>-->
						</tr>
					   </c:if>

					   <c:if test="${servNew ne 0 or servCh ne 0 or servEx ne 0}">
						<tr class="">
							<td class=" tac" scope="row">서비스</td>
							<td class=" tac nanumR">${servNew}</td>
							<td class=" tac nanumR">${servCh}</td>
							<td class=" tac nanumR">${servEx}</td>
							<!-- <td class=" tar nanumR fc-blue pr30"><fmt:formatNumber value="${servmount}" pattern="#,###"/><span class="fc11">&nbsp;원</span></td>-->
						</tr>
						</c:if>

		      	 	</tbody>
		      	 	<!-- <tfoot>
		      	 		<tr>
		      	 			<td class="tac">총합계 </td>
		      	 			<td class="f20 fc-red"></td>
		      	 			<td></td>
		      	 			<td></td>
		      	 			<td class="f20 fc-red pr30" ><input type="text" id="totalPrice" class="dpin bn w80 tar"/> <span class="f14 fc99"> 원</span></td>
		      	 		</tr>
		      	 	</tfoot>-->
				</table>
				<!-- end page-body 승인요약금액  -->
				<!-- begin #content page-body -->
				<div class="row pb50 mt20">
					<input type="hidden" id="h_userId" value="${userId}">
					<input type="hidden" id="h_userName" value="${userName}">
					<input type="hidden" id="h_projectId" value="${projectInfo.projectId}">
					<input type="hidden" id="h_projectAlias" value="${projectInfo.projectAlias}">
					<input type="hidden" id="h_managerId" value="${projectInfo.managerId}">
					<input type="hidden" id="h_managerName" value="${projectInfo.managerName}">
					<input type="hidden" id="apprvPass"				value="${apprvPass}" />
					<input type="hidden" id="selectApprv"			value="" />
					<!-- begin page-body 승인부분  -->
					<div class="row p-b-100">
						<!-- 검토&승인 부서 결재라인 표시부분 시작 -->
						<div class="row mb30 mt20">
							<!-- 요청부서 결재 표시부분 시작 -->
						<div class="col-xs-6 request">
							<h3 class="request_title"> 요청부서  </h3>

							<div class="col-xs-12 clear mt50">
								<c:forEach items="${getProductAppSteplist}" var="projectAppSteplistInfo" varStatus="status" >
							 		<c:if test="${projectAppSteplistInfo.stepLevel eq '1'}">
										<div class="col-xs-3 tac pl0 pr0">
									 		<ul class="step00 fl">
									    		<li class="fc11 f18 fb">입안보조</li>
										    	<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_PROCESSING' }"> <!--  진행중  -->
											    	<li class="mt-5">${projectAppSteplistInfo.apprvScheduleUserDeptName}</li>
											    	<li class="mt-5">${projectAppSteplistInfo.apprvScheduleUserName}</li>
											    	<li class="mt5 mb5"><i class="fa fa-spinner fa-pulse fa-fw fc-red f30"></i></li>
										    	</c:if>
										    	<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_COMPLETED' }"> <!-- 승인완료  -->
										    		<li>${projectAppSteplistInfo.apprvUserDeptName}</li>
									        		<li class="mt-5">${projectAppSteplistInfo.apprvUserName}</li>
										    		<li class="mt5 mb5"><i class="fa fa-bell-o f30 fc66"></i></li>
										    	</c:if>
										    	<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_REJECTED' }"> <!-- 반려  -->
										    		<li>${projectAppSteplistInfo.apprvUserDeptName}</li>
									        		<li class="mt-5">${projectAppSteplistInfo.apprvUserName}</li>
										    		<li class="mt5 mb5"  onclick="projectRejectHits()"><i class="fa fa-reply fc-orange f30"></i> </li>
										    	</c:if>
										    	<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_WAITING' }">  <!-- 대기  -->
									    	    	<li class="mt-5">${projectAppSteplistInfo.apprvScheduleUserDeptName}</li>
										    		<li class="mt-5">${projectAppSteplistInfo.apprvScheduleUserName}</li>
										    		<li class="mt5 mb5"><i class="fa fa-hourglass-half f30 fc66"></i> </li>
										    	</c:if>
									 		</ul>

									 		<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_PROCESSING' }">
										 		<p class="ribbon_00">진행중 </p>
									 		</c:if>
									 		<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_COMPLETED' }">
										 		<p class="ribbon_00">승인완료 </p>
									 		</c:if>
									 		<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_REJECTED' }">
										 		<p class="ribbon_re">반려 </p>
									 		</c:if>
									 		<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_WAITING' }">
										 		<p class="ribbon_stay">대기 </p>
									 		</c:if>
										        <p class="fc99 tac f12 mt5">${projectAppSteplistInfo.apprvDatetime}</p>
									 	</div>
							 		</c:if>

							 		<c:if test="${projectAppSteplistInfo.stepLevel eq '2'}">
										<div class="col-xs-3 pl0 pr0 tac">
									 		<ul class="step01">
									    		<li class="fc11 f18 fb">입안</li>
									   			<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_PROCESSING' }">
											   		<li class="mt-5">${projectAppSteplistInfo.apprvScheduleUserDeptName}</li>
												    <li class="mt-5">${projectAppSteplistInfo.apprvScheduleUserName}</li>
												    <li class="mt5 mb5"><i class="fa fa-spinner fa-pulse fa-fw f30 fc-red"></i></li>
										    	</c:if>
										    	<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_COMPLETED' }">
												    <li>${projectAppSteplistInfo.apprvUserDeptName}</li>
											        <li class="mt-5">${projectAppSteplistInfo.apprvUserName}</li>
												    <li class="mt5 mb5"><i class="fa fa-bell-o f30 fc66"></i> </li>
										    	</c:if>
										    	<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_REJECTED' }">
												    <li>${projectAppSteplistInfo.apprvUserDeptName}</li>
											        <li class="mt-5">${projectAppSteplistInfo.apprvUserName}</li>
												    <li class="mt5 mb5" onclick="projectRejectHits()"><i class="fa fa-reply fc-orange f30"></i> </li>
										    	</c:if>
										    	<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_WAITING' }">
												    <li class="mt-5">${projectAppSteplistInfo.apprvScheduleUserDeptName}</li>
												    <li class="mt-5">${projectAppSteplistInfo.apprvScheduleUserName}</li>
												    <li class="mt5 mb5"><i class="fa fa-hourglass-half fc66 f30"></i></li>
										    	</c:if>
									 		</ul>

											<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_PROCESSING' }">
									 			<p class="ribbon_01">진행중 </p>
									 		</c:if>
									 		<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_COMPLETED' }">
										 		<p class="ribbon_01">승인완료 </p>
									 		</c:if>
									 		<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_REJECTED' }">
										 		<p class="ribbon_re">반려 </p>
									 		</c:if>
									 		<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_WAITING' }">
										 		<p class="ribbon_stay">대기 </p>
									 		</c:if>
										        <p class="fc99 tac f12 mt5">${projectAppSteplistInfo.apprvDatetime}</p>
									 	</div>
							 		</c:if>

					 	 			<c:if test="${projectAppSteplistInfo.stepLevel eq '3'}">
										<div class="col-xs-3 pl0 pr0 tac">
								 			<ul class="step02">
								    			<li class="fc11 f18 fb">검토 </li>
									    		<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_PROCESSING' }">
											        <li class="mt-5">${projectAppSteplistInfo.apprvScheduleUserDeptName}</li>
												    <li class="mt-5">${projectAppSteplistInfo.apprvScheduleUserName}</li>
												    <li class="mt5 mb5"><i class="fa fa-spinner fa-pulse fa-fw f30 fc-red"></i>  </li>
								    			</c:if>
									    		<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_COMPLETED' }">
													<li>${projectAppSteplistInfo.apprvUserDeptName}</li>
													<li class="mt-5">${projectAppSteplistInfo.apprvUserName}</li>
													<li class="mt5 mb5"><i class="fa fa-bell-o f30 fc66"></i> </li>
									    		</c:if>
									    		<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_REJECTED' }">
												    <li>${projectAppSteplistInfo.apprvUserDeptName}</li>
											        <li class="mt-5">${projectAppSteplistInfo.apprvUserName}</li>
												    <li class="mt5 mb5" onclick="projectRejectHits()"><i class="fa fa-reply f30 fc-orange"></i></li>
											    </c:if>
											    <c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_WAITING' }">
												    <li class="mt-5">${projectAppSteplistInfo.apprvScheduleUserDeptName}</li>
												    <li class="mt-5">${projectAppSteplistInfo.apprvScheduleUserName}</li>
												    <li class="mt5 mb5"><i class="fa fa-hourglass-half f30 fc66"></i></li>
											    </c:if>
									     	</ul>

									     	<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_PROCESSING' }">
									     		<p class="ribbon_02">진행중 </p>
									     	</c:if>
									     	<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_COMPLETED' }">
									     		<p class="ribbon_02">승인완료  </p>
									     	</c:if>
									     	<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_REJECTED' }">
									     		<p class="ribbon_re">반려 </p>
									     	</c:if>
											<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_WAITING' }">
									     	 	<p class="ribbon_stay">대기 </p>
									     	</c:if>
									     		<p class="fc99 f12 tac mt5">${projectAppSteplistInfo.apprvDatetime}</p>
									 	</div>
						 			</c:if>

							 		<c:if test="${projectAppSteplistInfo.stepLevel eq '4'}">
										<div class="col-xs-3 tac pl0 pr0 tac">
											<ul class="step03 flr">
									    		<li class="fc11 f18 fb">승인</li>
										        <c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_PROCESSING'}">
													<li class="mt-5">${projectAppSteplistInfo.apprvScheduleUserDeptName}</li>
													<li class="mt-5">${projectAppSteplistInfo.apprvScheduleUserName}</li>
												    <li class="mt5 mb5"><i class="fa fa-spinner fa-pulse fa-fw f30 fc-red"></i> </li>
											    </c:if>
											    <c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_COMPLETED' }">
												    <li>${projectAppSteplistInfo.apprvUserDeptName}</li>
											        <li class="mt-5">${projectAppSteplistInfo.apprvUserName}</li>
												    <li class="mt5 mb5"><i class="fa fa-bell-o f30 fc66"></i> </li>
											    </c:if>
											    <c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_REJECTED' }">
												    <li>${projectAppSteplistInfo.apprvUserDeptName}</li>
											        <li class="mt-5">${projectAppSteplistInfo.apprvUserName}</li>
												    <li class="mt5 mb5" onclick="projectRejectHits()"><i class="fa fa-reply f30 fc-orange"></i> </li>
											    </c:if>
											    <c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_WAITING' }">
												    <li class="mt-5">${projectAppSteplistInfo.apprvScheduleUserDeptName}</li>
												    <li class="mt-5">${projectAppSteplistInfo.apprvScheduleUserName}</li>
												    <li class="mt5 mb5"><i class="fa fa-hourglass-half f30 fc66"></i></li>
											    </c:if>
									 		</ul>

											<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_PROCESSING' }">
										 		<p class="ribbon_03 fw">진행중 </p>
										 	</c:if>
										 	<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_COMPLETED' }">
										 		<p class="ribbon_03 fw">승인완료  </p>
										 	</c:if>
										 	<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_REJECTED' }">
										 		<p class="ribbon_re fw">반려  </p>
										 	</c:if>
										 	<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_WAITING' }">
										 		<p class="ribbon_stay">대기  </p>
										 	</c:if>
									 			<p class="fc99 tac f12 mt5">${projectAppSteplistInfo.apprvDatetime}</p>
										</div>
						 			</c:if>
						 		</c:forEach>
						 	</div>
						</div>
						<!-- 요청부서 결재 표시부분 끝-->

						<!-- 승인부서 결재 표시부분 시작 -->
						<div class="col-xs-6 approval flr">
							<h3 class="approval_title">승인부서</h3>

					 		<div class="col-xs-12 clear mt50">
								<c:forEach items="${getProductAppSteplist}" var="projectAppSteplistInfo" varStatus="status" >
									<c:if test="${projectAppSteplistInfo.stepLevel eq '5'}">
										<div class="col-xs-3 pl0 pr0 tac">
								 			<ul class="step00 fl">
								    			<li class="fc11 f18 fb">입안보조</li>
												<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_PROCESSING' }">
													<li class="mt-5">${projectAppSteplistInfo.apprvScheduleUserDeptName}</li>
													<li class="mt-5">${projectAppSteplistInfo.apprvScheduleUserName}</li>
													<li class="mt5 mb5"><i class="fa fa-spinner fa-pulse fa-fw f30 fc-red"></i> </li>
											    </c:if>
											    <c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_COMPLETED' }">
												    <li>${projectAppSteplistInfo.apprvUserDeptName}</li>
											        <li class="mt-5">${projectAppSteplistInfo.apprvUserName}</li>
												    <li class="mt5 mb5"><i class="fa fa-bell-o f30 fc66"></i> </li>
											    </c:if>
											    <c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_REJECTED' }">
												    <li>${projectAppSteplistInfo.apprvUserDeptName}</li>
											        <li class="mt-5">${projectAppSteplistInfo.apprvUserName}</li>
												    <li class="mt5 mb5" onclick="projectRejectHits()"> <i class="fa fa-reply f30 fc66"></i> </li>
											    </c:if>
											    <c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_WAITING' }">
												    <li class="mt-5">${projectAppSteplistInfo.apprvScheduleUserDeptName}</li>
												    <li class="mt-5">${projectAppSteplistInfo.apprvScheduleUserName}</li>
												    <li class="mt5 mb5"><i class="fa fa-hourglass-half f30 fc66"></i> </li>
											    </c:if>
										 	</ul>

										 	<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_PROCESSING' }">
										 		<p class="ribbon_00">진행중 </p>
										 	</c:if>
										 	<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_COMPLETED' }">
										 		<p class="ribbon_00">승인완료  </p>
										 	</c:if>
										 	<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_REJECTED' }">
										 		<p class="ribbon_re">반려  </p>
										 	</c:if>
										 	<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_WAITING' }">
										 		<p class="ribbon_stay">대기  </p>
										 	</c:if>
									 			<p class="fc99 tac f12 mt5">${projectAppSteplistInfo.apprvDatetime}</p>
							 		</div>
						 			</c:if>

						 			<c:if test="${projectAppSteplistInfo.stepLevel eq '6'}">
										<div class="col-xs-3 pl0 pr0 tac">
									 		<ul class="step04 fl">
									    		<li class="fc11 f18 fb">입안</li>
												<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_PROCESSING' }">
													<li class="mt-5">${projectAppSteplistInfo.apprvScheduleUserDeptName}</li>
													<li class="mt-5">${projectAppSteplistInfo.apprvScheduleUserName}</li>
													<li class="mt5 mb5"><i class="fa fa-spinner fa-pulse fa-fw f30 fc-red"></i> </li>
											    </c:if>
											    <c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_COMPLETED' }">
												    <li>${projectAppSteplistInfo.apprvUserDeptName}</li>
											        <li class="mt-5">${projectAppSteplistInfo.apprvUserName}</li>
												    <li class="mt5 mb5"><i class="fa fa-bell-o f30 fc66"></i> </li>
											    </c:if>
											    <c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_REJECTED' }">
												    <li>${projectAppSteplistInfo.apprvUserDeptName}</li>
											        <li class="mt-5">${projectAppSteplistInfo.apprvUserName}</li>
												    <li class="mt5 mb5" onclick="projectRejectHits()"> <i class="fa fa-reply f30 fc66"></i> </li>
											    </c:if>
											    <c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_WAITING' }">
												    <li class="mt-5">${projectAppSteplistInfo.apprvScheduleUserDeptName}</li>
												    <li class="mt-5">${projectAppSteplistInfo.apprvScheduleUserName}</li>
												    <li class="mt5 mb5"><i class="fa fa-hourglass-half f30 fc66"></i> </li>
											    </c:if>
										 	</ul>

										 	<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_PROCESSING' }">
									 			<p class="ribbon_04">진행중 </p>
										 	</c:if>
										 	<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_COMPLETED' }">
									 			<p class="ribbon_04">승인완료  </p>
										 	</c:if>
										 	<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_REJECTED' }">
										 		<p class="ribbon_re">반려  </p>
										 	</c:if>
										 	<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_WAITING' }">
										 		<p class="ribbon_stay">대기  </p>
										 	</c:if>
										 		<p class="fc99 tac f12 mt5">${projectAppSteplistInfo.apprvDatetime}</p>
								 		</div>
						 			</c:if>

						 			<c:if test="${projectAppSteplistInfo.stepLevel eq '7'}">
										<div class="col-xs-3 pl0 pr0 tac">
								 			<ul class="step05">
									    		<li class="fc11 f18 fb">검토</li>
												<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_PROCESSING' }">
													<li class="mt-5">${projectAppSteplistInfo.apprvScheduleUserDeptName}</li>
													<li class="mt-5">${projectAppSteplistInfo.apprvScheduleUserName}</li>
													<li class="mt5 mb5"><i class="fa fa-spinner fa-pulse fa-fw f30 fc-red"></i> </li>
											    </c:if>
											    <c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_COMPLETED' }">
												    <li>${projectAppSteplistInfo.apprvUserDeptName}</li>
											        <li class="mt-5">${projectAppSteplistInfo.apprvUserName}</li>
												    <li class="mt5 mb5"><i class="fa fa-bell-o f30 fc66"></i> </li>
											    </c:if>
											    <c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_REJECTED' }">
												    <li>${projectAppSteplistInfo.apprvUserDeptName}</li>
											        <li class="mt-5">${projectAppSteplistInfo.apprvUserName}</li>
												    <li class="mt5 mb5" onclick="projectRejectHits()"> <i class="fa fa-reply f30 fc66"></i> </li>
											    </c:if>
											    <c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_WAITING' }">
												    <li class="mt-5">${projectAppSteplistInfo.apprvScheduleUserDeptName}</li>
												    <li class="mt-5">${projectAppSteplistInfo.apprvScheduleUserName}</li>
												    <li class="mt5 mb5"><i class="fa fa-hourglass-half f30 fc66"></i> </li>
											    </c:if>
										 	</ul>

										 	<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_PROCESSING' }">
										 		<p class="ribbon_05">진행중 </p>
										 	</c:if>
									 		<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_COMPLETED' }">
										 		<p class="ribbon_05">승인완료  </p>
										 	</c:if>
										 	<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_REJECTED' }">
										 		<p class="ribbon_re">반려  </p>
										 	</c:if>
										 	<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_WAITING' }">
										 		<p class="ribbon_stay">대기  </p>
										 	</c:if>
										 		<p class="fc99 tac f12 mt5">${projectAppSteplistInfo.apprvDatetime}</p>
								 		</div>
							 		</c:if>

							 		<c:if test="${projectAppSteplistInfo.stepLevel eq '8'}">
										<div class="col-xs-3 pl0 pr0 tac">
									 		<ul class="step06 flr">
									    		<li class="fc11 f18 fb">승인</li>
												<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_PROCESSING' }">
													<li class="mt-5">${projectAppSteplistInfo.apprvScheduleUserDeptName}</li>
													<li class="mt-5">${projectAppSteplistInfo.apprvScheduleUserName}</li>
													<li class="mt5 mb5"><i class="fa fa-spinner fa-pulse fa-fw f30 fc-red"></i> </li>
											    </c:if>
											    <c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_COMPLETED' }">
												    <li>${projectAppSteplistInfo.apprvUserDeptName}</li>
											        <li class="mt-5">${projectAppSteplistInfo.apprvUserName}</li>
												    <li class="mt5 mb5"><i class="fa fa-bell-o f30 fc66"></i> </li>
											    </c:if>
											    <c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_REJECTED' }">
												    <li>${projectAppSteplistInfo.apprvUserDeptName}</li>
											        <li class="mt-5">${projectAppSteplistInfo.apprvUserName}</li>
												    <li class="mt5 mb5" onclick="projectRejectHits()"> <i class="fa fa-reply f30 fc66"></i> </li>
											    </c:if>
											    <c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_WAITING' }">
												    <li class="mt-5">${projectAppSteplistInfo.apprvScheduleUserDeptName}</li>
												    <li class="mt-5">${projectAppSteplistInfo.apprvScheduleUserName}</li>
												    <li class="mt5 mb5"><i class="fa fa-hourglass-half f30 fc66"></i> </li>
											    </c:if>
										 	</ul>

										 	<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_PROCESSING' }">
										 	<p class="ribbon_06 fw">진행중 </p>
										 	</c:if>
										 	<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_COMPLETED' }">
										 	<p class="ribbon_06 fw">승인완료  </p>
										 	</c:if>
										 	<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_REJECTED' }">
										 	<p class="ribbon_re fw">반려  </p>
										 	</c:if>
										 	<c:if test="${projectAppSteplistInfo.apprvState eq 'APPRV_WAITING' }">
										 	<p class="ribbon_stay">대기  </p>
										 	</c:if>

										 	<p class="fc99 tac f12 mt5">${projectAppSteplistInfo.apprvDatetime}</p>
								 		</div>
							 		</c:if>
								</c:forEach>
							</div>
						</div>
						<!-- 승인부서 결재 표시부분 끝 -->
					</div>
					<!-- end page-body 승인부분  -->

					
					

					
					
					<input type="hidden" id="hiddenTotalprice" value="${amount}">
			 		<input type="hidden" id="orderNo" value="${orderNo}">
			 		<input type="hidden" id="userId" value="${userId}">
			 		<input type="hidden" id="inject" value="${inject}">

					<div class="clear"></div>
					
					<%--
 					<c:forEach items="${getProjectAppSteplist}" var="getProjectAppSteplist" varStatus="status" >
						<c:forEach items="${approvalUserId}" var="approvalUserId" varStatus="status1" >
							<c:if test="${getProjectAppSteplist.stepId == approvalUserId.stepId}">
								<c:if test="${approvalUserId.userId == userId and getProjectAppSteplist.apprvState eq 'APPRV_PROCESSING'}">
									<c:choose>
											<c:when test="${getProjectAppSteplist.rightStepId == '*'}">
												<c:choose>
													<c:when test="${detail1.requestType == 'REQTYPE_EXPR'}">
														<div class="row tac m-t-50">
															<a type="button" class="btnType03 btnType03_submit"  onclick="projectApprving('${getProjectAppSteplist.stepLevel}','${orderNo}','${getProjectAppSteplist.rightStepId}')">승인</a>
															<a type="button" class="btnType03 btnType03_reject m-l-15" onclick="projectRejectedPopup('${getProjectAppSteplist.stepLevel}','${orderNo}','${getProjectAppSteplist.rightStepId}')">반려</a>
															<a type="button" class="btnType03 btnType03_list m-l-15" onclick="moveListPage()">목록</a>
														</div>
													</c:when>
												</c:choose>
														<div class="row tac m-t-50">
															<a type="button" class="btnType03 btnType03_submit"  onclick="projectApprving('${getProjectAppSteplist.stepLevel}','${orderNo}','${getProjectAppSteplist.rightStepId}')">승인</a>
															<a type="button" class="btnType03 btnType03_reject m-l-15" onclick="projectRejectedPopup('${getProjectAppSteplist.stepLevel}','${orderNo}','${getProjectAppSteplist.rightStepId}')">반려</a>
															<a type="button" class="btnType03 btnType03_list m-l-15" onclick="moveListPage()">목록</a>
														</div>
											</c:when>
											<c:otherwise>
												<div class="row tac m-t-50">
													<a type="button" class="btnType03 btnType03_submit"  onclick="projectApprving('${getProjectAppSteplist.stepLevel}','${orderNo}','${getProjectAppSteplist.rightStepId}')">승인</a>
													<a type="button" class="btnType03 btnType03_reject m-l-15" onclick="projectRejectedPopup('${getProjectAppSteplist.stepLevel}','${orderNo}','${getProjectAppSteplist.rightStepId}')">반려</a>
													<a type="button" class="btnType03 btnType03_list m-l-15" onclick="moveListPage()">목록</a>
												</div>
											</c:otherwise>
									</c:choose>
								</c:if>

									<c:if test="${approvalUserId.userId == userId and getProjectAppSteplist.apprvState ne 'APPRV_PROCESSING' and inject ne 'Y'}">
										<div class="row tac m-t-50">
											<a type="button" class="btnType03 btnType03_list" onclick="moveListPage()">목록</a>
										</div>
									</c:if>

									<c:if test="${getProjectAppSteplist.stepId != approvalUserId.stepId and inject ne 'Y'}">
										<div class="row tac m-t-50">
											<a type="button" class="btnType03 btnType03_list" onclick="moveListPage()">목록</a>
										</div>
									</c:if>
							</c:if>
						</c:forEach>
						<c:if test="${inject eq 'Y' and  getProjectAppSteplist.apprvState eq 'APPRV_REJECTED'}">
							<h2 class="titleBuType01 m-t-40 m-b-15">반려사유</h2>
							<textarea  rows="5" placeholder="비고란 입니다. 내용을 입력하세요" id="rejectedApprvDescription" name="rejectedApprvDescription" readonly >${getProjectAppSteplist.apprvDescription}</textarea>
							<div class="row tac m-t-50">
								<a type="button" class="btnType03 btnType03_list" onclick="moveListPage()">목록</a>
							</div>
						</c:if>
					</c:forEach>
					--%>
				</div>
				<!-- end #content page-body -->

				<!-- begin #content modal -->
				<!-- 작업자 지정 팝업 -->
				<div class="modal fade" id="modal-dialog3">
					<div class="modal-dialog">
	                   <div class="modal-content w560">
	                       <div class="modal-header">
	                           <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span></span></button>
	                           <h4 class="modal-title">작업자 지정</h4>
	                       </div>
	                       <div class="modal-body">
		                       <div class="page_searchBox m-b-15">
									<div class="searchArea">
										<div class="inputArea m-l-5">
											<input type="text" placeholder="검색어를 입력하세요" id="searchKeyword" onkeypress="if(event.keyCode==13)modalList();" style="width: 362px">
											<a type="button" class="btn_search" onclick="modalList();">검색</a>
										</div>
									</div>
								</div>
								<div class="noneList" style="display: none;">
									 <span>검색된 사용자가 없습니다.</span>
								</div>
								<div class="listArea" id="popListTable">

								</div>
	                       		<div class="totalcnt" id="totalCnt">총 4 건</div>
		                   	</div>
		                   	<div class="modal-footer tac">
	                       		<a type="button" class="whiteline" id ="popclose" onclick='setWorkUserName();'>확인</a>
	                       	</div>
		               	</div>
					</div>
                 </div>
                 <div class="modal fade" id="retryModal">
	           		<div class="modal-dialog">
	           			<div class="modal-content">
							<div class="modal-header">
								<input type="hidden" id="retryOrderno">
								<button type="button" class="close" data-dismiss="modal" aria-hidden="true" onclick='gridPopList();'><span></span></button>
	                           	<h4 class="modal-title">작업내역</h4>
	                       	</div>
	                       	<div class="modal-body">
	                       		<div class="client_DetailArea">
	                       			<div>
	                       				<span class="dpin fb fc-blue2">작업 결과 : 실패</span>
	                       			</div>
	                       			<div class="mt15">
	                       				<span class="dpin fb fc-blue2">실패 내용 : <span id="retryMessage"></span></span>
	                       			</div>
	                       		</div>
	                       	</div>
	                       	<div class="modal-footer tac">
		             			<a type=button class="pbton bton_blue" data-dismiss="modal" onclick="retryProvisioning();">재시도</a>	 
		             			<a type=button class="pbton bton_green" data-dismiss="modal" onclick="endProvisioning();">작업종료</a>	 
		             			<a type=button class="pbton bton_dgrey" data-dismiss="modal">취소</a> 
		                 	</div>
	                    </div>
	           		</div>
	           	</div>

				<!-- 가상서버 상세 팝업 -->
				<div class="modal fade" id="modal-dialog-reqlist">
					<div class="modal-dialog">
						<div class="modal-content w560">
							<div class="modal-header">
 								<button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span></span></button>
								<h4 class="modal-title">가상서버 상세</h4>
							</div>
	                       	<div class="modal-body" id="vmDetailPopup">
								<div class="reqDetailArea">
									<div class="title tal">
										<span class="statusLabel_small status_new">신규</span>
										<h4>아이뷰몰 프로젝트</h4>
									</div>
									<div class="detail_01">
										<ul>
											<li>
												<span class="doubledotte">서버명</span>
												<em id="">리뷰호스트0805_1리뷰호스트</em>
											</li>
											<li>
												<span class="doubledotte">호스트명</span>
												<em id="" class="fontVdn">review_host0805_1reviewrev</em>
											</li>
											<li>
												<span class="doubledotte">네트워크</span>
												<em id="">리뷰회원사_내부_망</em>
											</li>
											<li>
												<span class="doubledotte">OS</span>
												<em id=""></em>
											</li>
											
										</ul>
									</div>
									<div class="detail_02">
										<ul>
											<li class="p-r-20  p-l-20">
												<span class="fontVdn tal label01">vCPU</span>
												<p class="tar m-t-5"><em class="fontVdn vcpuResult">44</em><span class="fontVdn fc66 f14 m-l-5">Core</span></p>
											</li>
											<li class="p-r-20 p-l-20">
												<span class="fontVdn tal label02">MEMORY</span>
												<p class="tar m-t-5"><em class="fontVdn memResult">1,123</em><span class="fontVdn fc66 f14 m-l-5">GB</span></p>
											</li>
											<li class="p-r-20 p-l-20">
												<span class="fontVdn tal label03">DISK</span>
												<p class="tar m-t-5"><em class="fontVdn diskResult">99,999</em><span class="fontVdn fc66 f14 m-l-5">GB</span></p>
											</li>
										</ul>
									</div>
									<div class="detail_03">
										<ul>
											<li>
												<span class="doubledotte">과금단위</span>
												<em id="">월 단위</em>
											</li>
											<li>
												<span class="doubledotte">서비스희망일시</span>
												<em id="">승인완료 후 생성</em>
											</li>
										</ul>
									</div>
									<div class="detail_04">
										<span class="f18 fc11">금액</span>
										<span class="flr">
											<em class="fontVdn result">88,888,888</em>
											<span class="f18 fc66">원</span>
										</span>
									</div>
								</div>
		                   	</div>
		                   	<div class="modal-footer tac">
                       			<a type="button" class="whiteline" data-dismiss="modal" id ="popclose">닫기</a>
	                       	</div>
		               	</div>
					</div>
                 </div>

				<!-- 블록디스크 상세 팝업 -->
				<div class="modal fade" id="modal-dialog-disk">
					<div class="modal-dialog">
						<div class="modal-content w560">
							<div class="modal-header">
 								<button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span></span></button>
								<h4 class="modal-title">블록디스크 상세</h4>
							</div>
	                       	<div class="modal-body" id="diskDetailPopup">
								<div class="reqDetailArea">
									<div class="title tal">
										<span class="statusLabel_small status_new">신규</span>
										<h4>아이뷰몰 프로젝트</h4>
									</div>
									<div class="detail_01" style="border-bottom: 1px solid #999">
										<ul>
											<li>
												<span class="doubledotte" style="width: 90px">가상서버</span>
												<em id="">리뷰호스트0805_1리뷰호스트</em>
											</li>
											<li>
												<span class="doubledotte" style="width: 90px">디스크명</span>
												<em id="" class="fontVdn" style="letter-spacing: -1px">12838c52-4ace-4e31-afcb-03e3ea23d37b</em>
											</li>
											<li>
												<span class="doubledotte" style="width: 90px">디스크크기</span>
												<em id="" class="fontVdn">
													<strong class="fc11">12,345</strong>
													<strong class="fc66 f16">GB</strong>
												</em>
											</li>
										</ul>
									</div>
									<div class="detail_03">
										<ul>
											<li>
												<span class="doubledotte">과금단위</span>
												<em id="">월 단위</em>
											</li>
											<li>
												<span class="doubledotte">서비스희망일시</span>
												<em id="">승인완료 후 생성</em>
											</li>
										</ul>
									</div>
									<div class="detail_04">
										<span class="f18 fc11">금액</span>
										<span class="flr">
											<em class="fontVdn result">88,888,888</em>
											<span class="f18 fc66">원</span>
										</span>
									</div>
								</div>
		                   	</div>
		                   	<div class="modal-footer tac">
                       			<a type="button" class="whiteline" data-dismiss="modal" id ="popclose">닫기</a>
	                       	</div>
		               	</div>
					</div>
                 </div>

				<!-- NAS 상세 팝업 -->
				<div class="modal fade" id="modal-dialog-nas">
					<div class="modal-dialog">
						<div class="modal-content w560">
							<div class="modal-header">
 								<button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span></span></button>
								<h4 class="modal-title">NAS 상세</h4>
							</div>
	                       	<div class="modal-body" id="nasDetailPopup">
								<div class="reqDetailArea">
									<div class="title tal">
										<span class="statusLabel_small status_new">신규</span>
										<h4>아이뷰몰 프로젝트</h4>
									</div>
									<div class="detail_01" style="border-bottom: 1px solid #999">
										<ul>
											<li>
												<span class="doubledotte" style="width: 80px">서버명</span>
												<em id="">리뷰호스트0805_1리뷰호스트</em>
											</li>
											<li>
												<span class="doubledotte" style="width: 80px">NAS명</span>
												<em id="" class="fontVdn" style="letter-spacing: -1px">12838c52-4ace-4e31-afcb-03e3ea23d37b</em>
											</li>
											<li>
												<span class="doubledotte" style="width: 80px">NAS용량</span>
												<em id="" class="fontVdn">
													<strong class="fc11">12,345</strong>
													<strong class="fc66 f16">GB</strong>
												</em>
											</li>
										</ul>
									</div>
									<div class="detail_03">
										<ul>
											<li>
												<span class="doubledotte">과금단위</span>
												<em id="">월 단위</em>
											</li>
											<li>
												<span class="doubledotte">서비스희망일시</span>
												<em id="">승인완료 후 생성</em>
											</li>
										</ul>
									</div>
									<div class="detail_04">
										<span class="f18 fc11">금액</span>
										<span class="flr">
											<em class="fontVdn result">88,888,888</em>
											<span class="f18 fc66">원</span>
										</span>
									</div>
								</div>
		                   	</div>
		                   	<div class="modal-footer tac">
                       			<a type="button" class="whiteline" data-dismiss="modal" id ="popclose">닫기</a>
	                       	</div>
		               	</div>
					</div>
                 </div>

				<!-- 서비스 로드분산 상세 팝업 -->
				<div class="modal fade" id="modal-dialog-lb">
					<div class="modal-dialog">
						<div class="modal-content w560">
							<div class="modal-header">
 								<button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span></span></button>
								<h4 class="modal-title" id="lbpoptitle">서비스 로드분산 상세</h4>
							</div>
	                       	<div class="modal-body" id="lbDetailPopup">
								<div class="reqDetailArea">
									<div class="title tal">
										<span class="statusLabel_small status_new">신규</span>
										<h4>아이뷰몰 프로젝트</h4>
									</div>
									<div class="detail_01" style="border-bottom: 1px solid #999">
										<ul>
											<li>
												<span class="doubledotte" style="width: 140px">서비스 로드분산명</span><br/>
												<em id="" class="fontVdn">12838c52-4ace-4e31-afcb-03e3ea23d37b</em>
											</li>
										</ul>
									</div>
									<div class="detail_03">
										<ul>
											<li>
												<span class="doubledotte">과금단위</span>
												<em id="">월 단위</em>
											</li>
											<li>
												<span class="doubledotte">서비스희망일시</span>
												<em id="">승인완료 후 생성</em>
											</li>
										</ul>
									</div>
									<div class="detail_04">
										<span class="f18 fc11">금액</span>
										<span class="flr">
											<em class="fontVdn result">88,888,888</em>
											<span class="f18 fc66">원</span>
										</span>
									</div>
								</div>
		                   	</div>
		                   	<div class="modal-footer tac">
                       			<a type="button" class="whiteline" data-dismiss="modal" id ="popclose">닫기</a>
	                       	</div>
		               	</div>
					</div>
                 </div>
                 
                 <!-- 스냅샷 상세 팝업 -->
				<div class="modal fade" id="modal-dialog-sn">
					<div class="modal-dialog">
						<div class="modal-content w560">
							<div class="modal-header">
 								<button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span></span></button>
								<h4 class="modal-title">스냅샷 상세</h4>
							</div>
	                       	<div class="modal-body" id="snDetailPopup">
								<div class="reqDetailArea">
									<div class="title tal">
										<span class="statusLabel_small status_new">신규</span>
										<h4>아이뷰몰 프로젝트</h4>
									</div>
									<div class="detail_01" style="border-bottom: 1px solid #999">
										<ul>
											<li>
												<span class="doubledotte" style="width: 140px">스냅샷명</span><br/>
												<em id="" class="fontVdn">12838c52-4ace-4e31-afcb-03e3ea23d37b</em>
											</li>
										</ul>
									</div>
									<div class="detail_03">
										<ul>
											<li>
												<span class="doubledotte">서비스희망일시</span>
												<em id="">승인완료 후 생성</em>
											</li>
										</ul>
									</div>
									<div class="detail_04">
										<span class="f18 fc11">금액</span>
										<span class="flr">
											<em class="fontVdn result">88,888,888</em>
											<span class="f18 fc66">원</span>
										</span>
									</div>
								</div>
		                   	</div>
		                   	<div class="modal-footer tac">
                       			<a type="button" class="whiteline" data-dismiss="modal" id ="popclose">닫기</a>
	                       	</div>
		               	</div>
					</div>
                 </div>

				<!-- 공인IP 상세 팝업 -->
				<div class="modal fade" id="modal-dialog-ip">
					<div class="modal-dialog">
						<div class="modal-content w560">
							<div class="modal-header">
 								<button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span></span></button>
								<h4 class="modal-title">공인 IP 상세</h4>
							</div>
	                       	<div class="modal-body" id="ipDetailPopup">
								<div class="reqDetailArea">
									<div class="title tal">
										<span class="statusLabel_small status_new">신규</span>
										<h4>아이뷰몰 프로젝트</h4>
									</div>
									<div class="detail_01" style="border-bottom: 1px solid #999">
										<ul>
											<li>
												<span class="doubledotte" style="width: 80px">연결할 곳</span>
												<em id="" >웹 서버#1, 웹 서버#1, 웹 서버#1</em>
											</li>
										</ul>
									</div>
									<div class="detail_03">
										<ul>
											<li>
												<span class="doubledotte">과금단위</span>
												<em id="">월 단위</em>
											</li>
											<li>
												<span class="doubledotte">서비스희망일시</span>
												<em id="">승인완료 후 생성</em>
											</li>
										</ul>
									</div>
									<div class="detail_04">
										<span class="f18 fc11">금액</span>
										<span class="flr">
											<em class="fontVdn result">88,888,888</em>
											<span class="f18 fc66">원</span>
										</span>
									</div>
								</div>
		                   	</div>
		                   	<div class="modal-footer tac">
                       			<a type="button" class="whiteline" data-dismiss="modal" id ="popclose">닫기</a>
	                       	</div>
		               	</div>
					</div>
                 </div>

				<!-- 서비스 상세 팝업 -->
				<div class="modal fade" id="modal-dialog-service">
					<div class="modal-dialog" id="svcDetailPopup">
						<div class="modal-content w560">
							<div class="modal-header">
 								<button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span></span></button>
								<h4 class="modal-title">서비스 상세</h4>
							</div>
	                       	<div class="modal-body">
								<div class="reqDetailArea">
									<div class="title tal">
										<span class="statusLabel_small status_new">신규</span>
										<h4>아이뷰몰 프로젝트</h4>
									</div>
									<div class="detail_03" style="border-top: 2px solid #999">
										<ul>
											<li>
												<span class="doubledotte">과금단위</span>
												<em id="">월 단위</em>
											</li>
											<li>
												<span class="doubledotte">서비스희망일시</span>
												<em id="">승인완료 후 생성</em>
											</li>
										</ul>
									</div>
									<div class="detail_04">
										<span class="f18 fc11">금액</span>
										<span class="flr">
											<em class="fontVdn result">88,888,888</em>
											<span class="f18 fc66">원</span>
										</span>
									</div>
								</div>
		                   	</div>
		                   	<div class="modal-footer tac">
                       			<a type="button" class="whiteline" data-dismiss="modal" id ="popclose">닫기</a>
	                       	</div>
		               	</div>
					</div>
                 </div>

                <!-- 반려사유 팝업 -->
				<div class="modal fade" id="modal-dialog-reject">
					<div class="modal-dialog">
						<div class="modal-content w560">
							<div class="modal-header">
 								<button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span></span></button>
								<h4 class="modal-title">반려 사유</h4>
							</div>
	                       	<div class="modal-body">
								<div class="rejectInfo m-b-20">
									반려 사유를 상세하게 입력하여 주십시오.
								</div>
								<textarea style="height: 200px" rows="5" placeholder="반려 사유를 입력해주세요." id="apprvDescription" name="apprvDescription" ></textarea>
		                   	</div>
		                   	<div class="modal-footer tac">
                       			<a type="button" class="lbtn" id ="popclose" onclick="javascript:projectRejected();">확인</a>
                       			<a type="button" class="rbtn" data-dismiss="modal" id ="popclose">취소</a>
	                       	</div>
		               	</div>
					</div>
                 </div>

				<!-- 실시간 가용 용량 팝업 -->
				<div class="modal fade" id="modal-dialog-useVolume">
					<div class="modal-dialog width-800" >
						<div class="modal-content">
							<div class="modal-header">
 								<button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span></span></button>
								<h4 class="modal-title">실시간 가용 용량</h4>
							</div>
	                       	<div class="modal-body useVolumeTable" id="useVolumeTable">
								<table class="detail_Table">
						        	<colgroup>
								 		<col width="*">
								 		<col width="100x">
								 		<col width="100px">
								 		<col width="100px">
								 		<col width="100px">
								 	</colgroup>
									<thead>
									    <tr>
											<th>구분</th>
											<th>가상서버</th>
											<th class='fontVdn'><span class="fontVdn">vCPU</span><br/><span class="fontN">(Core)</span></th>
											<th class='fontVdn'><span class="fontVdn">MEMORY</span><br/><span class="fontN">(GB)</span></th>
											<th class='fontVdn'><span class="fontVdn">DISK</span><br/><span class="fontN">(GB)</span></th>
										</tr>
									</thead>
									<tbody>
										<tr>
											<td class="leftHead tal">클라우드<br/>용량</td>
											<td class="tar fontVdn"></td>
											<td class="tar fontVdn"></td>
											<td class="tar fontVdn"></td>
											<td class="tar fontVdn lastCol"></td>
										</tr>
										<tr>
											<td class="leftHead tal">클라우드<br/>사용용량</td>
											<td class="tar fontVdn"></td>
											<td class="tar fontVdn"></td>
											<td class="tar fontVdn"></td>
											<td class="tar fontVdn lastCol"></td>
										</tr>
										<tr>
											<td class="leftHead tal">클라우드<br/>가용용량</td>
											<td class="tar fontVdn"></td>
											<td class="tar fontVdn"></td>
											<td class="tar fontVdn"></td>
											<td class="tar fontVdn lastCol"></td>
										</tr>
										<tr>
											<td class="leftHead tal">프로젝트<br/>제한</td>
											<td class="tar fontVdn"></td>
											<td class="tar fontVdn"></td>
											<td class="tar fontVdn"></td>
											<td class="tar fontVdn lastCol"></td>
										</tr>
										<tr>
											<td class="leftHead tal">프로젝트<br/>사용용량</td>
											<td class="tar fontVdn"></td>
											<td class="tar fontVdn"></td>
											<td class="tar fontVdn"></td>
											<td class="tar fontVdn lastCol"></td>
										</tr>
										<tr class="sumRow b-b99" >
											<td class="leftHead tal">실시간<br/>가용용량</td>
											<td class="tar fontVdn"></td>
											<td class="tar fontVdn"></td>
											<td class="tar fontVdn"></td>
											<td class="tar fontVdn lastCol"></td>
										</tr>
									</tbody>
								</table>
		                   	</div>
		                   	<div class="modal-footer tac">
                       			<a type="button" class="pbton bton_blue" data-dismiss="modal" id ="popclose">확인</a>
                       			<a type="button" class="pbton bton_dgrey" data-dismiss="modal" id ="popclose">취소</a>
	                       	</div>
		               	</div>
					</div>
                 </div>

                 <!-- #modal-dialog 결재자 지정팝업-->
	        	<div class="modal fade" id="modal-approve-review-dialog">
	            	<div class="modal-dialog width-720">
	                	<div class="modal-content width-720">
	                    	<div class="modal-header">
	                        	<button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
	                        	<h4 class="modal-title">승인부서 결재지정</h4>
	                    	</div>

	                    	<div class="modal-body">
					   			<table class="tableV">
							 		<colgroup>
							 			<col width="20%">
							 			<col width="20%">
										<col width="20%">
										<col width="20%">
										<col width="10%">
							 		</colgroup>
							 		<thead>
							 			<tr class="skyblue">
											<th>구분</th>
											<th>사번</th>
											<th>직급</th>
											<th>이름</th>
											<th></th>
									     </tr>
						    		</thead>
						    		<tbody>
							 			<tr>
											<td class="tac" id="approvalLine1_title"> 입안보조 </td>
											<td class="tac" id="approvalLine1_userId"> 사번 </td>
											<td class="tac" id="approvalLine1_userLevel"> 직급 </td>
											<td class="tac" id="approvalLine1_userName"> 이름 </td>
											<td class="tac">
												<button type="button" class="cbton bton_lblue" id="approvalLine1" onclick="openReviewModal(this);"><i class='fa fa-search'></i></button>
											</td>
										</tr>
							 			<tr>
								 			<td class="tac" id="approvalLine2_title"> 입안 </td>
								 			<td class="tac" id="approvalLine2_userId"> 사번 </td>
								 			<td class="tac" id="approvalLine2_userLevel"> 직급 </td>
								 			<td class="tac" id="approvalLine2_userName"> 이름 </td>
								 			<td class="tac">
								 				<button type="button" class="cbton bton_lblue" id="approvalLine2" onclick="openReviewModal(this);" disabled="disabled"><i class='fa fa-search'></i></button>
								 			</td>
							 			</tr>
							 			<tr>
											<td class="tac" id="approvalLine3_title"> 검토 </td>
											<td class="tac" id="approvalLine3_userId"> 사번 </td>
											<td class="tac" id="approvalLine3_userLevel"> 직급 </td>
											<td class="tac" id="approvalLine3_userName"> 이름 </td>
											<td class="tac">
												<button type="button" class="cbton bton_lblue" id="approvalLine3" onclick="openReviewModal(this);" disabled="disabled"><i class='fa fa-search'></i></button>
											</td>
										</tr>
										<tr>
											<td class="tac" id="approvalLine4_title"> 승인 </td>
											<td class="tac" id="approvalLine4_userId"> 사번 </td>
											<td class="tac" id="approvalLine4_userLevel"> 직급 </td>
											<td class="tac" id="approvalLine4_userName"> 이름 </td>
											<td class="tac">
												<button type="button" class="cbton bton_lblue" id="approvalLine4" onclick="openReviewModal(this);" disabled="disabled"><i class='fa fa-search'></i></button>
											</td>
										</tr>
							 		</tbody>
					 			</table>
						 	</div>
							<div class="clear"></div>
							<div class="modal-footer tac">
		             			<a type=button class="pbton bton_blue" data-dismiss="modal" onclick="checkApproval();">확인</a>
		             			<a type=button class="pbton bton_dgrey" data-dismiss="modal">취소</a>
		                 	</div>
	              		</div>
	           		</div>
				</div>

                 <!-- 프로젝트 검토자 결재자 지정 팝업 -->
				<!-- #modal-dialog -->
				<div class="modal fade" id="user-modal-review-dialog">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal" aria-hidden="true" onclick='gridPopList();'><span></span></button>
	                           	<h4 class="modal-title">직원 검색</h4>
	                       	</div>
	                       	<div class="modal-body">

								<!--//검색 시작-->
								<div class="page_searchBox m-b-15">
									<div class="searchArea">
									    <div class="selectBox" style="width:100px;">
										<label class="selectText" for="reviewSearchKind">전체</label>
										<select class="search-sel" id="reviewSearchKind">
											<option value="searchAll">전체</option>
											<option value="userId">사번</option>
											<option value="userName">이름</option>
											<option value="deptName">부서</option>
										</select>
									    </div>
									   <div class="inputArea m-l-5">
										<input type="text" class="search-text-s" placeholder="사번이나 이름 부서를 입력하세요" id="reviewUserId" onkeypress="if(event.keyCode==13)gridPopList();" >
										<button type="button" class="bton-s bton_blue" onclick="gridPopList();"><i class="fa fa-search"></i> 검색</button>
									  </div>
								 </div>
								</div>
								<!--검색  끝//-->

								<table class="tableV">
							 		<colgroup>
										<col width="*">
										<col width="15%">
										<col width="15%">
										<col width="15%">
										<col width="15%">
										<col width="8%">
							 		</colgroup>
							 		<thead>
							 			<tr class="skyblue">
							 				<th class="tac">부서</th>
											<th class="tac">사번</th>
											<th class="tac">직급</th>
											<th class="tac">이름</th>
											<th class="tac">상태</th>
											<th class="tac"></th>
										</tr>
									</thead>
							 		<tbody id="popListReviewTable">
							 		</tbody>
					 	    	</table>

								<div class="noneList" id='popListReviewTable2'>
									<span>검색된 사용자가 없습니다.</span>
								</div>
	                      		<div class="totalcnt" id="totalReviewCnt">총 0 건</div>
		                   	</div>
		                   	<div class="modal-footer tac">
	                       		<a type="button" class="whiteline" data-dismiss="modal" >닫기</a>
	                       	</div>
		               	</div>
					</div>
	           	</div>
				<!-- #modal-dialog -->
				<!-- end #content modal -->

				<!-- begin #footer -->
				<c:import url="/WEB-INF/views/mng/include/footer.jsp" charEncoding="UTF-8"></c:import>
				<!-- end #footer -->

			</div>
			<!-- end #content -->
		</div>
		<!-- end #page-container -->
		</div>
		
		<c:import url="/WEB-INF/views/mng/include/script.jsp" charEncoding="UTF-8"></c:import>
		<script type="text/javascript">

			// 결재라인 관련 변수
			var currentApprovalLine = "";
			var approvalList = [];
			var hostnameList = [<c:forEach items="${checkHostName}" var="checkHostName" varStatus="status" >'${checkHostName.hostname}'<c:if test="${!status.last}">,</c:if></c:forEach>];
			var ipList =[<c:forEach items="${checkIp}" var="checkIp" varStatus="status" >'${checkIp.defaultNetworkIp}'<c:if test="${!status.last}">,</c:if></c:forEach>];
			var backIpList =[<c:forEach items="${checkBackupIp}" var="checkBackupIp" varStatus="status" >'${checkBackupIp.defaultNetworkIp}'<c:if test="${!status.last}">,</c:if></c:forEach>];

			function saveHostNameCheck(hostname, orderNo) {
				if(hostname == '' && hostname == null) {
					alertBox3("HOSTNAME을 확인해 주세요");
					return false;
				}
				if(hostname.length != 8) {
					alertBox3("호스트명이 8자가 아닙니다.");
					return false;
				}
				$("#h_hostname").val(hostname);
				$("#h_orderNo").val(orderNo);

				$.ajax({
					url : "${contextPath}/mng/req/product/setHostNameCheck",
					dataType : "JSON",
		 			type : "POST",
					data : {
						"hostname" : hostname
					},
					success : function(data) {
						var result = data;
						if(result == 0){
							saveYn();
						} else {
							alertBox3("HOSTNAME이 중복되었습니다.");
							return false;
						}
					},
					error : function(request, status, error) {
						alertBox3("code:" + request.status + "\n" + "error:" + error);
					}
				});
			}

			function saveIpCheck(ip, orderNo,cloudId) {

				if((ip == '' && ip == null) || regIp(ip) == null) {
					alertBox3("IP를 확인해 주세요");
					return false;
				}

				$("#h_ip").val(ip);
				$("#h_orderNo").val(orderNo);
				$.ajax({
					url : "${contextPath}/mng/req/product/setIpCheck",
					dataType : "JSON",
		 			type : "POST",
					data : {
						"defaultNetworkIp" : ip,
						"cloudId" : cloudId
					},
					success : function(data) {
						var result = data;

						if(result == 0){
							saveYnIp();
						}else{
							alertBox3("이미 사용중인 IP 입니다.");
							return false;
						}
					},
					error : function(request, status, error) {
						alertBox3("code:" + request.status + "\n" + "error:" + error);
					}
				});
			}

			function saveBackupIpCheck(ip, orderNo,cloudId) {

				if(ip == '' && ip == null || regIp(ip) == null) {
					alertBox3("IP를 확인해 주세요");
					return false;
				}
				$("#h_backupIp").val(ip);
				$("#h_orderNo").val(orderNo);
				var cloudId = "${projectInfo.cloudId}";
				$.ajax({
					url : "${contextPath}/mng/req/product/setBackupIpCheck",
					dataType : "JSON",
		 			type : "POST",
					data : {
						"backupNetworkIp" : ip,
						"cloudId" : cloudId
					},
					success : function(data) {
						var result = data;
						if(result == 0){
							saveYnBackupIp();
						}else{
							alertBox3("이미 사용중인 IP 입니다.");
							return false;
						}
					},
					error : function(request, status, error) {
						alertBox3("code:" + request.status + "\n" + "error:" + error);
					}
				});
			}

			function regIp(ip){
				var regExp = /^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}((0|[2-9])|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-4])$/;
				var regResult = ip.match(regExp);
				return regResult;
			}

			function saveYn(){
				confirmBox2("저장 하시겠습니까?", saveHostName);
			}

			function saveHostName() {
				var targetId = $("#h_orderNo").val()+'HostNameChk';
				$.ajax({
					url : "${contextPath}/mng/req/product/setHostName",
					dataType : "JSON",
		 			type : "POST",
					data : {
						"orderProductSeq" : $("#h_orderNo").val(),
						"hostname" : $("#h_hostname").val()

					},
					success : function(data) {
						alertBox3("저장 되었습니다.");
						$("#"+targetId).val("Y");
					},
					error : function(request, status, error) {
						alertBox3("code:" + request.status + "\n" + "error:" + error);
					}
				});
			}

			function saveYnIp(){
				confirmBox2("저장 하시겠습니까?", saveIp);
			}

			function saveIp() {
				var targetId = $("#h_orderNo").val()+'IpChk';
				$.ajax({
					url : "${contextPath}/mng/req/product/setIp",
					dataType : "JSON",
		 			type : "POST",
					data : {
						"orderProductSeq" : $("#h_orderNo").val(),
						"defaultNetworkIp" : $("#h_ip").val()

					},
					success : function(data) {
						alertBox3("저장 되었습니다.");
						$("#"+targetId).val("Y");
					},
					error : function(request, status, error) {
						alertBox3("code:" + request.status + "\n" + "error:" + error);
					}
				});
			}

			function saveYnBackupIp(){
				confirmBox2("저장 하시겠습니까?", saveBackupIp);
			}

			function saveBackupIp() {
				var targetId = $("#h_orderNo").val()+'BackupIpChk';
				$.ajax({
					url : "${contextPath}/mng/req/product/setBackupIp",
					dataType : "JSON",
		 			type : "POST",
					data : {
						"orderProductSeq" : $("#h_orderNo").val(),
						"backupNetworkIp" : $("#h_backupIp").val()

					},
					success : function(data) {
						alertBox3("저장 되었습니다.");
						$("#"+targetId).val("Y");
					},
					error : function(request, status, error) {
						alertBox3("code:" + request.status + "\n" + "error:" + error);
					}
				});
			}

		// 자원구매승인 상세 불러오기
		function productDetail(orderNo) {
			$.ajax({
				url : "${contextPath}/mng/req/product/detail",
				dataType : "JSON",
	 			type : "POST",
				data : {
					"orderNo" : orderNo
				},
				success : function(data) {
					var result = data;
					setData(result);
				},
				error : function(request, status, error) {
					alertBox3("code:" + request.status + "\n" + "error:" + error);
				}
			});

		}

		function setData(result){
			$("#projectAlias").text(result.projectAlias);
			$("#hostname").text(result.hostname);
			$("#vcpus").text(result.vcpus);
			$("#memGb").text(result.memGb);
			$("#diskGb").text(result.diskGb);
			$("#onDemandFlag").val(result.onDemandFlag);

			//$("#apprvDescription").text(result.rejectedApprvDescription);
		}

		//승인 버튼 누를시 체크 박스 확인
		function projectApprving(stepLevel,requestSeq,rightStepId){
			var tmpLength = $("input[name='hostNameChk']").length;
			var tmpData = new Array(tmpLength);
			for(var i=0 ; i < tmpLength; i++) {
				tmpData[i] = $("input[name='hostNameChk']")[i].value;
			}

			var tmpIpLength = $("input[name='ipChk']").length;
			var tmpIpData = new Array(tmpIpLength);
			for(var i=0 ; i < tmpIpLength; i++) {
				tmpIpData[i] = $("input[name='ipChk']")[i].value;
			}

			var tmpBackupIpLength = $("input[name='backupIpChk']").length;
			var tmpBackupIpData = new Array(tmpBackupIpLength);
			for(var i=0 ; i < tmpBackupIpLength; i++) {
				tmpBackupIpData[i] = $("input[name='backupIpChk']")[i].value;
			}

			var apprvDescription = $("#apprvDescription").val();
			var jsonData = {
					"requestSeq" : $("#allOrderNo").val()
					,"stepLevel" :stepLevel
					,"rightStepId":rightStepId
					,"apprvDescription":apprvDescription
					,"orderUserId" : "${getOrderUserId.orderUserId}"
					,"apprvUserName" : "${userName}"
					,"apprvUserId" : "${userId}"
					,"projectAlias": $("#h_projectAlias").val()
					,"managerName" : $("#h_managerName").val()
				}
			if( $("input:checkbox[name='projectIdchk']:checked").length == $("input:checkbox[name='projectIdchk']").length && tmpData.indexOf("N") == -1 && tmpIpData.indexOf("N") == -1 && tmpBackupIpData.indexOf("N") == -1 ) {
				confirmBox2("승인 처리  하시겠습니까?", checkWorkUser ,jsonData);
			}  else if( tmpData.indexOf("N") != -1) {
				alertBox3("HOSTNAME을 입력해주세요");
			} else if( tmpIpData.indexOf("N") != -1) {
				alertBox3("IP를 입력해주세요");
			} else if( tmpBackupIpData.indexOf("N") != -1) {
				alertBox3("Backup IP를 입력해주세요");
			} else if($("input:checkbox[name='projectIdchk']:checked").length==0 || $("input:checkbox[name='projectIdchk']:checked").length != $("input:checkbox[name='projectIdchk']").length) {
				alertBox3("승인대상 자원을 체크해 주세요");
			}
		}



		//승인 버튼 누를시 체크박스 후 작업자지정 확인
		function checkWorkUser(jsonData){
			var sign = "${userApprvState}";

			$.ajax({
				url : "${contextPath}/mng/req/product/checkWorkUser",
				dataType : "JSON",
				type : "POST",
				data : {
					"orderNo" : $("#allOrderNo").val()
				},
				beforeSend : function(xhr, opts) {
					setLodingFun.blocksFun();
				},
				complete : function() {
					setLodingFun.nonesFun();
				},

				success : function(data) {
					var result = data
					if(result > 0){
						alertBox3("작업자를 지정해 주세요.");
					}else{
						ajaxProjectApprving(jsonData);
					}
				},
				error : function(request, status, error) {
					alertBox3("code:" + request.status + "\n" + "error:" + error);
				}
			});
		}

		function waiting(){
			
		  alert();
			
			alertBox("처리중 입니다.<br>잠시만 기다려 주십시오.", waiting);
		}
		function ajaxProjectApprving(jsonObj){

			//alert(jsonObj.rightStepId);

			if(jsonObj.rightStepId != '*'){

				$.ajax({
					url : "${contextPath}/mng/req/product/stepUpdate",
					dataType : "JSON",
					type : "POST",
					data : jsonObj,
					beforeSend : function(xhr, opts) {
						setLodingFun.blocksFun();
					},
					complete : function() {
						setLodingFun.nonesFun();
					},
					success : function(data) {
						var result = data;
						if(result==1){
							alertBox("승인 처리가 완료 되었습니다.<br>처리 내용이 신청 담당자에게<br>메일, SMS를 통해<br>전달되었습니다.", moveViewPage);
						}else{
							alertBox("fail!!", moveViewPage);
						}
					},
					error : function(request, status, error) {
						alertBox3("code:" + request.status + "\n" + "error:" + error);
					}
				});
			}else if(jsonObj.rightStepId == '*'){
					alertBox("처리중 입니다.<br>잠시만 기다려 주십시오.", waiting);
					var jsonData = setJsonData();

					$.ajax({
						url : "${contextPath}/mng/req/product/insert",
						dataType : "JSON",
						type : "POST",
						data : jsonData,
						success : function(data) {
							var result = data;
							if(result=1){
								alertBox("승인 처리가 완료 되었습니다.<br>처리 내용이 신청 담당자에게<br>메일, SMS를 통해<br>전달되었습니다.", moveViewPage);
							}else{
								alertBox("fail!!", moveViewPage);
							}
						},
						error : function(request, status, error) {
							alertBox3("code:" + request.status + "\n" + "error:" + error);
						}
					});
			}

		}

		var rejectStepLevel = "";
		var rejectOrderNo = "";
		var rejectRightStepId = "";

			//반려 버튼 누를시
			function projectRejectedPopup(stepLevel, requestSeq, rightStepId) {
				$("#modal-dialog-reject").modal();
				rejectStepLevel = stepLevel;
				rejectOrderNo = $("#allOrderNo").val();
				rejectRightStepId = rightStepId;
			}

			function projectRejected() {
				if($("#apprvDescription").val()==""){
					$("#apprvDescription").focus();
					alertBox("자원신청 반려시 반려사유를<br>입력해 주시기 바랍니다.");
					return false;
				}
				// var jsonData = setJsonData();
				$.ajax({
					url : "${contextPath}/mng/req/product/rejectedUpdate",
					dataType : "JSON",
		//			type : "POST",
					data : {
						"requestSeq" : rejectOrderNo
						,"stepLevel" : rejectStepLevel
						,"apprvDescription":$("#apprvDescription").val()
						,"orderUserId" : "${getOrderUserId.orderUserId}"
						,"apprvUserId" : "${userId}"
						,"apprvUserName" : "${userName}"
					},
					beforeSend : function(xhr, opts) {
						setLodingFun.blocksFun();
					},
					complete : function() {
						setLodingFun.nonesFun();
					},
					
					success : function(data) {
						var result = data;
						if(result==1){
							alertBox("자원신청이 반려되었습니다.", moveViewPage)
						}else{
							alertBox3("fail!!");
							moveViewPage();
						}
					},
					error : function(request, status, error) {
						alertBox3("code:" + request.status + "\n" + "error:" + error);
					}
				})
			}

		// 목록 페이지이동
		function moveViewPage(){
			setLodingFun.blocksFun();
			location.href = "${contextPath}/mng/req/product/view?orderNo="+$("#allOrderNo").val();
		}

		// 목록 페이지이동
		function moveListPage(){
//			location.reload();
			location.href = "${contextPath}/mng/req/product/";
		}
		function setJsonData(){
			var jsonData = {
					"requestSeq" : $("#allOrderNo").val()
					, "onDemandFlag" : $("#onDemandFlag").val()
 					,"orderUserId" : "${getOrderUserId.orderUserId}"
					,"apprvUserId" : $("#h_userId").val()
					,"apprvUserName" : $("#h_userName").val()
					, "apprvPass" : $("#apprvPass").val()
					, "selectApprv" : $("#selectApprv").val()
			};
			return jsonData;
			}

		function viewtr(orderProductSeq){
			//alertBox3(basketSeq);
			var vorderProductSeq = "v"+orderProductSeq;
			var corderProductSeq = "c"+orderProductSeq;
			var sorderProductSeq = "s"+orderProductSeq;

			if($("#"+corderProductSeq).val()=="0"){
				$("#"+corderProductSeq).val("1");
				$("#"+vorderProductSeq).show();
				$("#"+sorderProductSeq).removeClass('fa fa-chevron-down');
				$("#"+sorderProductSeq).addClass('fa fa-chevron-up');
			}else{
				$("#"+corderProductSeq).val("0");
				$("#"+vorderProductSeq).hide();
				$("#"+sorderProductSeq).removeClass('fa fa-chevron-up');
				$("#"+sorderProductSeq).addClass('fa fa-chevron-down');
			}

		}

		var pmParam = {
				userName : ""
				,userId : ""
				,orderProductSeq : ""
				,productCategory : ""
		}

		var vOrderProductSeq = "";
		var vProductCategory = "";

		function userAppoint(orderProductSeq,productCategory){

			pmParam = {
				userName : ""
				,userId : ""
				,orderProductSeq : ""
				,productCategory : ""
			}
			vOrderProductSeq = orderProductSeq;
			vProductCategory = productCategory;
			$("#modal-dialog3").modal();
			modalList();
		}

		function modalList(){

			var customerId="${customerId}";
			var keyword = $("#searchKeyword").val();

			$.ajax({
				url : "${contextPath}/mng/req/product/productPmList",
				dataType : "JSON",
//	 			type : "POST",
				data : {
					"customerId" : customerId
					,"keyword" : keyword
				},
				success : function(data) {
					var getPmList = data;

					$("#popListTable > div").remove();
					$("#totalCnt").text("");

					if(getPmList!=""){
						var Html="";
						Html = "<div class='listArea maxH' id='popListTable'>";

						$.each(getPmList,function(key,val){
							Html +=			"<div class='listBg'>";
							Html +=				"<span class='name'>"+ val["userName"] +"</span>";
							Html +=				"<span class='idlabel'>(사번 : <span class='userid nanumR'>"+val["userId"]+"</span>)</span>";
							Html +=				"<a class='applybtn' onclick='updatePmUser(\""+val["userName"]+"\", \""+val["userId"]+"\", \""+vOrderProductSeq+"\",\""+vProductCategory+"\", this)'>선택</a>";
							Html +=			"</div>";
						});
						Html += "</div>";

						$("#popListTable").append(Html);
						$("#totalCnt").text("총 "+getPmList.length+" 건");

					}else{
						var Html="";
						Html = "<div class='noneList' style='display: none;'>";
						Html +=		"<span>검색된 사용자가 없습니다.</span>";
						Html += "</div>";

						$("#popListTable").append(Html);
						$("#totalCnt").text("총 0 건");
					}

				},
				error : function(request, status, error) {
					alertBox3("code:" + request.status + "\n" + "error:" + error);
				}
			});

		}

		function updatePmUser(userName,userId,orderProductSeq,productCategory, e){
			$(".applybtn").removeClass("active");
			$(e).addClass("active");
			pmParam.userName = userName;
			pmParam.userId = userId;
			pmParam.orderProductSeq = orderProductSeq;
			pmParam.productCategory = productCategory;

			setWorkUserName();
		}

		function setWorkUserName(){
			if(pmParam.userName != ""){
				var orderProductSeqId = pmParam.orderProductSeq+"UserName"
			 	document.getElementById(orderProductSeqId).value= pmParam.userName;
				$("#"+orderProductSeqId).val(pmParam.userName);
				ajaxUpdatePmUser();
			}
			$("#modal-dialog3").modal("hide");
		}

		function ajaxUpdatePmUser(){
			$.ajax({
				url : "${contextPath}/mng/req/product/updateWorkUser",
				dataType : "JSON",
				type : "POST",
				data : {
					"orderProductSeq" : pmParam.orderProductSeq
					,"productCategory" :pmParam.productCategory
					,"workUserId": pmParam.userId
				},
				success : function(data) {
					var result = data;
					if(result==1){

					}else{
						alertBox3("fail!!");
					}
				},
				error : function(request, status, error) {
					alertBox3("code:" + request.status + "\n" + "error:" + request);
				}
			});
		}


		function productDetail(productType, orderProductSeq){



			$.ajax({
				url : "${contextPath}/mng/req/product/detailOrderProduct",
				dataType : "JSON",
//	 			type : "POST",
				data : {
					"productType" : productType,
					"orderProductSeq" : orderProductSeq
				},
				success : function(data) {
					if (productType == 'vm') vmDetail(data);
					else if (productType == 'disk') diskDetail(data);
					else if (productType == 'nas') nasDetail(data);
					else if (productType == 'ip') ipDetail(data);
					else if (productType == 'lb') lbDetail(data);
					else if (productType == 'service') serviceDetail(data);
// 					else if (productType == 'bak') bakDetail(data);
// 					else if (productType == 'mca') mcaDetail(data);
// 					else if (productType == 'scm') scmDetail(data);
// 					else if (productType == 'scr') scrDetail(data);					
				},
				error : function(request, status, error) {
					alertBox3("code:" + request.status + "\n" + "error:" + error);
				}
			});
		}

		function vmDetail(data){
			var html = "";
			$("#vmDetailPopup > div").remove();
			html += "<div class=\"reqDetailArea\">";
			html += "	<div class=\"title tal\">";
			if(data.requestName == '해지') {
				html += "		<span class=\"statusLabel_small status_out\">"+data.requestName+"</span>";
			} else {
				html += "		<span class=\"statusLabel_small status_new\">"+data.requestName+"</span>";
			}
			html += "		<h4>"+data.projectAlias+"</h4>";
			html += "	</div>";
			html += "	<div class=\"detail_01\">";
			html += "		<ul>";
			html += "			<li>";
			html += "				<span class=\"doubledotte\">서버명</span>";
			html += "				<em id=\"\">"+data.hostnameAlias+"</em>";
			html += "			</li>";
			html += "			<li>";
			html += "				<span class=\"doubledotte\">호스트명</span>";
			html += "				<em id=\"\" class=\"fontVdn\">"+data.hostname+"</em>";
			html += "			</li>";
			html += "			<li>";
			html += "				<span class=\"doubledotte\">네트워크</span>";
			html += "				<em id=\"\">"+data.defaultNetworkName+"</em>";
			html += "			</li>";
			html += "			<li>";
			html += "				<span class=\"doubledotte\">OS</span>";
			html += "				<em id=\"\" class=\"fontVdn\">"+data.osProductName+"</em>";
			html += "			</li>";
			html += "		</ul>";
			html += "	</div>";
			html += "	<div class=\"detail_02\">";
			html += "		<ul>";
			html += "			<li class=\"p-r-20  p-l-20\">";
			html += "				<span class=\"fontVdn tal label01\">vCPU</span>";
			html += "				<p class=\"tar m-t-5\"><em class=\"fontVdn vcpuResult\">"+addcomma(data.vcpus)+"</em><span class=\"fontVdn fc66 f14 m-l-5\">Core</span></p>";
			html += "			</li>";
			html += "			<li class=\"p-r-20 p-l-20\">";
			html += "				<span class=\"fontVdn tal label02\">MEMORY</span>";
			html += "				<p class=\"tar m-t-5\"><em class=\"fontVdn memResult\">"+addcomma(data.memGb)+"</em><span class=\"fontVdn fc66 f14 m-l-5\">GB</span></p>";
			html += "			</li>";
			html += "			<li class=\"p-r-20 p-l-20\">";
			html += "				<span class=\"fontVdn tal label03\">DISK</span>";
			html += "				<p class=\"tar m-t-5\"><em class=\"fontVdn diskResult\">"+addcomma(data.vmDiskGb)+"</em><span class=\"fontVdn fc66 f14 m-l-5\">GB</span></p>";
			html += "			</li>";
			html += "		</ul>";
			html += "	</div>";
			html += "	<div class=\"detail_03\">";
			html += "		<ul>";
			html += "			<li>";
			html += "				<span class=\"doubledotte\">서비스희망일시</span>";
			if (data.onDemandFlag == 'Y') {
				html += "				<em id=\"\">승인완료 후 생성</em>";
			} else {
				html += "				<em id=\"\">"+data.applyDatetime+"</em>";
			}
			html += "			</li>";
			html += "		</ul>";
			html += "	</div>";
			html += "</div>";
			$("#vmDetailPopup").html(html);

			$("#modal-dialog-reqlist").modal();
		}
		function openPopSn(requestName,projectAlias, snapshotName, hostname,diskAlias,description,applyDatetime,onDemandFlag) {
			$("#lbpoptitle").text("스냅샷 상세");
			var html = "";
			$("#snDetailPopup > div").remove();
			html += "<div class=\"reqDetailArea\">";
			html += "	<div class=\"title tal\">";
			if(requestName == '해지') {
				requestName = "삭제";
				html += "		<span class=\"statusLabel_small status_out\">"+requestName+"</span>";
			} else {
				if(requestName == '변경'){
					requestName = "적용";
				}
				html += "		<span class=\"statusLabel_small status_new\">"+requestName+"</span>";
			}
			html += "		<h4>"+projectAlias+"</h4>";
			html += "	</div>";
			html += "	<div class=\"detail_01\">";
			html += "		<ul>";
			html += "			<li>";
			html += "				<span class=\"doubledotte\" style=\"width: 140px\">스냅샷 명</span>";
			html += "				<em id=\"\">"+snapshotName+"</em>";
			html += "			</li>";
			html += "		</ul>";
			html += "	</div>";
			html += "	<div class=\"detail_03\">";
			html += "		<ul>";
			html += "			<li>";
			html += "				<span class=\"doubledotte\">호스트명</span>";
			html += "				<em id=\"\">"+hostname+"</em>";
			html += "			</li>";
			html += "			<li>";
			html += "				<span class=\"doubledotte\">디스크명</span>";
			html += "				<em id=\"\">"+diskAlias+"</em>";
			html += "			</li>";
			if(requestName == '신규') {
				if(onDemandFlag == "Y"){
					html += '<li><span class=\"doubledotte\">생성일시</span><em id=\"\">승인완료 후 생성</em></li>';
				} else {
					html += '<li><span class=\"doubledotte\">생성일시</span><em id=\"\">'+applyDatetime+'</em></li>';
				}
				html += "			<li>";
				html += "				<span class=\"doubledotte\">설명</span>";
				html += "				<em id=\"\">"+description+"</em>";
				html += "			</li>";
			}
			html += "		</ul>";
			html += "	</div>";
			html += "</div>";
			$("#lbDetailPopup").html(html);

			$("#modal-dialog-lb").modal();
		}
		function diskDetail(data){



			var html = "";
			$("#diskDetailPopup > div").remove();
			html += "<div class=\"reqDetailArea\">";
			html += "	<div class=\"title tal\">";
			if(data.requestName == '해지') {
				html += "		<span class=\"statusLabel_small status_out\">"+data.requestName+"</span>";
			} else {
				html += "		<span class=\"statusLabel_small status_new\">"+data.requestName+"</span>";
			}
			html += "		<h4>"+data.projectAlias+"</h4>";
			html += "	</div>";
			html += "	<div class=\"detail_01\">";
			html += "		<ul>";
			html += "			<li>";
			html += "				<span class=\"doubledotte\" style=\"width: 90px\">서버명</span>";
			html += "				<em id=\"\">"+data.hostnameAlias+"</em>";
			html += "			</li>";
			html += "			<li>";
			html += "				<span class=\"doubledotte\" style=\"width: 90px\">디스크명</span>";
			html += "				<em id=\"\" class=\"fontVdn\" style=\"letter-spacing: -1px\">"+data.diskName+"</em>";
			html += "			</li>";
			html += "			<li>";
			html += "				<span class=\"doubledotte\" style=\"width: 90px\">디스크크기</span>";
			html += "				<em id=\"\" class=\"fontVdn\">";
			if(data.requestName == '변경') {
				html += "				<strong class=\"fc11\">"+addcomma(data.beforeDiskGb)+ "->" +addcomma(data.diskGb)+"</strong>";
			}else{
			html += "				<strong class=\"fc11\">"+addcomma(data.diskGb)+"</strong>";
			}
			html += "				<strong class=\"fc66 f16\">GB</strong>";
			html += "				</em>";
			html += "			</li>";
			html += "		</ul>";
			html += "	</div>";
			html += "	<div class=\"detail_03\">";
			html += "		<ul>";
			html += "			<li>";
			html += "				<span class=\"doubledotte\">과금단위</span>";
			if (data.hourlyFlag == 'Y') {
				html += "				<em id=\"\">시간 단위</em>";
			} else {
				html += "				<em id=\"\">월 단위</em>";
			}
			html += "			</li>";
			html += "			<li>";
			html += "				<span class=\"doubledotte\">서비스희망일시</span>";
			if (data.onDemandFlag == 'Y') {
				html += "				<em id=\"\">승인완료 후 생성</em>";
			} else {
				html += "				<em id=\"\">"+data.applyDatetime+"</em>";
			}
			html += "			</li>";
			html += "		</ul>";
			html += "	</div>";
			html += "	<div class=\"detail_04\">";
			html += "		<span class=\"f18 fc11\">금액</span>";
			html += "		<span class=\"flr\">";
			html += "			<em class=\"fontVdn result\">"+addcomma(data.amount)+"</em>";
			html += "			<span class=\"f18 fc66\">원</span>";
			html += "		</span>";
			html += "	</div>";
			html += "</div>";
			$("#diskDetailPopup").append(html);

			$("#modal-dialog-disk").modal();
		}

		function nasDetail(data){
			var html = "";
			$("#nasDetailPopup > div").remove();
			html += "<div class=\"reqDetailArea\">";
			html += "	<div class=\"title tal\">";
			if(data.requestName == '해지') {
				html += "		<span class=\"statusLabel_small status_out\">"+data.requestName+"</span>";
			} else {
				html += "		<span class=\"statusLabel_small status_new\">"+data.requestName+"</span>";
			}
			html += "		<h4>"+data.projectAlias+"</h4>";
			html += "	</div>";
			html += "	<div class=\"detail_01\">";
			html += "		<ul>";
			html += "			<li>";
			html += "				<span class=\"doubledotte\" style=\"width: 90px\">NAS명</span>";
			html += "				<em id=\"\" class=\"fontVdn\" style=\"letter-spacing: -1px\">"+data.nasName+"</em>";
			html += "			</li>";
			html += "			<li>";
			html += "				<span class=\"doubledotte\" style=\"width: 90px\">NAS용량</span>";
			html += "				<em id=\"\" class=\"fontVdn\">";
			html += "				<strong class=\"fc11\">"+addcomma(data.nasGb2)+"</strong>";
			html += "				<strong class=\"fc66 f16\">GB</strong>";
			html += "				</em>";
			html += "			</li>";
			html += "		</ul>";
			html += "	</div>";
			html += "	<div class=\"detail_03\">";
			html += "		<ul>";
			html += "			<li>";
			html += "				<span class=\"doubledotte\">과금단위</span>";
			if (data.hourlyFlag == 'Y') {
				html += "				<em id=\"\">시간 단위</em>";
			} else {
				html += "				<em id=\"\">월 단위</em>";
			}
			html += "			</li>";
			html += "			<li>";
			html += "				<span class=\"doubledotte\">서비스희망일시</span>";
			if (data.onDemandFlag == 'Y') {
				html += "				<em id=\"\">승인완료 후 생성</em>";
			} else {
				html += "				<em id=\"\">"+data.applyDatetime+"</em>";
			}
			html += "			</li>";
			html += "		</ul>";
			html += "	</div>";
			html += "	<div class=\"detail_04\">";
			html += "		<span class=\"f18 fc11\">금액</span>";
			html += "		<span class=\"flr\">";
			html += "			<em class=\"fontVdn result\">"+addcomma(data.amount)+"</em>";
			html += "			<span class=\"f18 fc66\">원</span>";
			html += "		</span>";
			html += "	</div>";
			html += "</div>";
			$("#nasDetailPopup").append(html);
			$("#modal-dialog-nas").modal();
		}

		function ipDetail(data){
			var html = "";
			$("#ipDetailPopup > div").remove();
			html += "<div class=\"reqDetailArea\">";
			html += "	<div class=\"title tal\">";
			if(data.requestName == '해지') {
				html += "		<span class=\"statusLabel_small status_out\">"+data.requestName+"</span>";
			} else {
				html += "		<span class=\"statusLabel_small status_new\">"+data.requestName+"</span>";
			}
			html += "		<h4>"+data.projectAlias+"</h4>";
			html += "	</div>";
			html += "	<div class=\"detail_01\">";
			html += "		<ul>";
			html += "			<li>";
			html += "				<span class=\"doubledotte\" style=\"width: 80px\">연결할 곳</span>";
			html += "				<em id=\"\">"+data.description+"</em>";
			html += "			</li>";
			html += "		</ul>";
			html += "	</div>";
			html += "	<div class=\"detail_03\">";
			html += "		<ul>";
			html += "			<li>";
			html += "				<span class=\"doubledotte\">과금단위</span>";
			if (data.hourlyFlag == 'Y') {
				html += "				<em id=\"\">시간 단위</em>";
			} else {
				html += "				<em id=\"\">월 단위</em>";
			}
			html += "			</li>";
			html += "			<li>";
			html += "				<span class=\"doubledotte\">서비스희망일시</span>";
			if (data.onDemandFlag == 'Y') {
				html += "				<em id=\"\">승인완료 후 생성</em>";
			} else {
				html += "				<em id=\"\">"+data.applyDatetime+"</em>";
			}
			html += "			</li>";
			html += "		</ul>";
			html += "	</div>";
			html += "	<div class=\"detail_04\">";
			html += "		<span class=\"f18 fc11\">금액</span>";
			html += "		<span class=\"flr\">";
			html += "			<em class=\"fontVdn result\">"+addcomma(data.amount)+"</em>";
			html += "			<span class=\"f18 fc66\">원</span>";
			html += "		</span>";
			html += "	</div>";
			html += "</div>";
			$("#ipDetailPopup").append(html);

			$("#modal-dialog-ip").modal();
		}

		function lbDetail(data){
			$("#lbpoptitle").text("로드밸런스 상세");
			var html = "";
			$("#lbDetailPopup > div").remove();
			html += "<div class=\"reqDetailArea\">";
			html += "	<div class=\"title tal\">";
			if(data.requestName == '해지') {
				html += "		<span class=\"statusLabel_small status_out\">"+data.requestName+"</span>";
			} else {
				html += "		<span class=\"statusLabel_small status_new\">"+data.requestName+"</span>";
			}
			html += "		<h4>"+data.projectAlias+"</h4>";
			html += "	</div>";
			html += "	<div class=\"detail_01\">";
			html += "		<ul>";
			html += "			<li>";
			html += "				<span class=\"doubledotte\" style=\"width: 140px\">서비스 로드분산명</span>";
			html += "				<em id=\"\">"+data.loadbalancerName+"</em>";
			html += "			</li>";
			html += "		</ul>";
			html += "	</div>";
			html += "	<div class=\"detail_03\">";
			html += "		<ul>";
			html += "			<li>";
			html += "				<span class=\"doubledotte\">가상서버 목록</span>";
			html += "				<em id=\"\">"+data.loadbalancerVm+"</em>";
			html += "			</li>";
			html += "			<li>";
			html += "				<span class=\"doubledotte\">PORT</span>";
			html += "				<em id=\"\">"+data.port+"</em>";
			html += "			</li>";
			html += "			<li>";
			html += "				<span class=\"doubledotte\">method</span>";
			html += "				<em id=\"\">"+data.method+"</em>";
			html += "			</li>";
			html += "			<li>";
			html += "				<span class=\"doubledotte\">protocol</span>";
			html += "				<em id=\"\">"+data.protocol+"</em>";
			html += "			</li>";
			html += "		</ul>";
			html += "	</div>";
			html += "</div>";
			$("#lbDetailPopup").append(html);

			$("#modal-dialog-lb").modal();
		}

		function serviceDetail(data){
			svcDetail('서비스 상세', data);
		}

// 		function bakDetail(data){
//			svcDetail('백업 서비스 상세', data);
//		}

// 		function mcaDetail(data){
// 			svcDetail('형상관리 서비스 상세', data);
// 		}

// 		function scmDetail(data){
// 			svcDetail('대외계 서비스 상세', data);
// 		}

// 		function scrDetail(data){
// 			svcDetail('보안관제 서비스 상세', data);
// 		}

		function svcDetail(popTitle, data){
			var html = "";
			$("#svcDetailPopup > div").remove();
			console.log(data);
			html += "<div class=\"modal-dialog\" id=\"svcDetailPopup\">";
			html += "	<div class=\"modal-content w560\">";
			html += "		<div class=\"modal-header\">";
			html += "			<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\"><span></span></button>";
			html += "			<h4 class=\"modal-title\">"+popTitle+"</h4>";
			html += "		</div>";
            html += "       	<div class=\"modal-body\">";
			html += "			<div class=\"reqDetailArea\">";
			html += "				<div class=\"title tal\">";
			if(data.requestName == '해지') {
				html += "					<span class=\"statusLabel_small status_out\">"+data.requestName+"</span>";
			} else {
				html += "					<span class=\"statusLabel_small status_new\">"+data.requestName+"</span>";
			}
			html += "					<h4>"+data.projectAlias+"</h4>";
			html += "				</div>";
			html += "				<div class=\"detail_03\" style=\"border-top: 2px solid #999\">";
			html += "					<ul>";
			html += "						<li>";
			html += "							<span class=\"doubledotte\" style=\"vertical-align:top !important;\">요청내용</span>";
			var description = data.description;
			description = replaceAll(description,"\n","<br/>");
			html += "							<em id=\"\">"+description+"</em>";
			html += "						<li>";
			html += "							<span class=\"doubledotte\">서비스희망일시</span>";
			if (data.onDemandFlag == 'Y') {
				html += "							<em id=\"\">승인완료 후 생성</em>";
			} else {
				html += "							<em id=\"\">"+data.applyDatetime+"</em>";
			}
			html += "						</li>";
			html += "					</ul>";
			html += "				</div>";
			html += "			</div>";
            html += "       	</div>";
            html += "       	<div class=\"modal-footer tac\">";
            html += "   			<a type=\"button\" class=\"whiteline\" data-dismiss=\"modal\" id =\"popclose\">닫기</a>";
            html += "       	</div>";
            html += "   	</div>";
			html += "</div>";
			$("#svcDetailPopup").append(html);

			$("#modal-dialog-service").modal();
		}
		function replaceAll(str,searchStr,replaceStr){
			return str.split(searchStr).join(replaceStr);
		}
		function syncCloudAvail(){
			confirmBox2("가용용량을 새로고침 하시겠습니까?", openstacksync);
		}


		function openstacksync(){
			alertBox("처리중입니다.</br>잠시만 기다려 주십시오.", waiting);
			$.ajax({
				url : "${contextPath}/mng/req/product/cloudUsageProjectSync",
				dataType : "JSON",
				success : function(data) {
					alertBox("완료되었습니다.", moveListPage);
				},
				error : function(request, status, error) {
					alertBox3("code:" + request.status + "\n" + "error:" + error);
				}
			});
		}

		function useVolumeDetail(projectId){
			$.ajax({
				url : "${contextPath}/mng/req/product/cloudUsageProject",
				dataType : "JSON",
	 			type : "GET",
				data : {
					"projectId" : projectId
				},
				success : function(data) {

					var volumeList = data;
					var allhtml = "";
					var projecthtml = "";
					var html = "";

					$("#useVolumeTable > table").remove();
					html += "<table class='tableV'>";
			        html += "	<colgroup>";
					html += " 		<col width='8%''>";
					html += " 		<col width='*'>";
					html += " 		<col width='14%'>";
					html += " 		<col width='14%'>";
					html += " 		<col width='14%'>";
					html += " 		<col width='14%'>";
					html += " 	</colgroup>";
					html += "	<thead>";
					html += "	    <tr>";
					html += "			<th> </th>";
					html += "			<th>구분</th>";
					html += "			<th>가상서버</th>";
					html += "			<th>vCPU(Core)</th>";
					html += "			<th>MEMORY(GB)</th>";
					html += "			<th>DISK(GB)</th>";
					html += "		</tr>";
					html += "	</thead>";
					html += "	<tbody>";

					$.each(volumeList,function(key,val){

						if (val["projectId"] == 'ALL') {

							allhtml += "		<tr>";
							allhtml += "			<td rowspan='3' class='lh20'>전<br/>체</td>";
							allhtml += "			<td>클라우드 용량</td>";
							allhtml += "			<td class='tar'>"+addcomma(val["vmTotal"])+"</td>";
							allhtml += "			<td class='tar'>"+addcomma(val["vcpuTotal"])+"</td>";
							allhtml += "			<td class='tar'>"+addcomma(val["memTotal"])+"</td>";
							allhtml += "			<td class='tar'>"+addcomma(val["diskTotal"])+"</td>";
							allhtml += "		</tr>";
							allhtml += "		<tr>";
							allhtml += "			<td>클라우드 사용용량</td>";
							allhtml += "			<td class='tar'>"+addcomma(val["vmUsed"])+"</td>";
							allhtml += "			<td class='tar'>"+addcomma(val["vcpuUsed"])+"</td>";
							allhtml += "			<td class='tar'>"+addcomma(val["memUsed"])+"</td>";
							allhtml += "			<td class='tar'>"+addcomma(val["diskUsed"])+"</td>";
							allhtml += "		</tr>";
							allhtml += "		<tr>";
							allhtml += "			<td>클라우드 가용용량</td>";
							allhtml += "			<td class='tar'>"+addcomma(val["vmAvail"])+"</td>";
							allhtml += "			<td class='tar'>"+addcomma(val["vcpuAvail"])+"</td>";
							allhtml += "			<td class='tar'>"+addcomma(val["memAvail"])+"</td>";
							allhtml += "			<td class='tar'>"+addcomma(val["diskAvail"])+"</td>";
							allhtml += "		</tr>";
						} else {
							projecthtml += "		<tr>";
							projecthtml += "			<td rowspan='3' class='lh20 bb1859'>프<br/>로<br/>젝<br/>트</td>";
							projecthtml += "			<td>프로젝트 제한용량</td>";
							projecthtml += "			<td class='tar'>"+addcomma(val["vmTotal"])+"</td>";
							projecthtml += "			<td class='tar'>"+addcomma(val["vcpuTotal"])+"</td>";
							projecthtml += "			<td class='tar'>"+addcomma(val["memTotal"])+"</td>";
							projecthtml += "			<td class='tar'>"+addcomma(val["diskTotal"])+"</td>";
							projecthtml += "		</tr>";
							projecthtml += "		<tr>";
							projecthtml += "			<td>프로젝트 사용용량</td>";
							projecthtml += "			<td class='tar'>"+addcomma(val["vmUsed"])+"</td>";
							projecthtml += "			<td class='tar'>"+addcomma(val["vcpuUsed"])+"</td>";
							projecthtml += "			<td class='tar'>"+addcomma(val["memUsed"])+"</td>";
							projecthtml += "			<td class='tar'>"+addcomma(val["diskUsed"])+"</td>";
							projecthtml += "		</tr>";
							projecthtml += "		<tr>";
							projecthtml += "			<td class='fc-orange bb1859'>실시간 가용용량</td>";
							projecthtml += "			<td class='tar fc-orange'>"+addcomma(val["vmAvail"])+"</td>";
							projecthtml += "			<td class='tar fc-orange'>"+addcomma(val["vcpuAvail"])+"</td>";
							projecthtml += "			<td class='tar fc-orange'>"+addcomma(val["memAvail"])+"</td>";
							projecthtml += "			<td class='tar fc-orange'>"+addcomma(val["diskAvail"])+"</td>";
							projecthtml += "		</tr>";
						}

					});

					html += allhtml;
					html += projecthtml;
					html += "	</tbody> ";
					html += "</table>    " ;
					$("#useVolumeTable").append(html);

					$("#modal-dialog-useVolume").modal();
				},
				error : function(request, status, error) {
					alertBox3("code:" + request.status + "\n" + "error:" + error);
				}
			});
		}

			// 신청 버튼 클릭시 결재자 지정 팝업 Open
			function openApproveReviewModal(projectStatusFlag) {
				//01 작성중,02 처리중,03 반려,04 처리완료
				$("#h_projectStatusFlag").val(projectStatusFlag);
				$("#pop_projectAlias").text($("#projectAlias").val());
				$("#pop_description").text($("#projectDescription").val());

				$("#pop_projectAlias").text($("#projectAlias").val());
				$("#pop_description").text($("#projectDescription").val());
				$("#pop_price").text($("#price").val());
				$("#pop_dispSdate").text($("#dispSdate").val());
				$("#pop_dispEdate").text($("#dispEdate").val());
				$("#pop_customerName").text($("#customerName").val());
				$("#pop_deptName").text($("#deptName").val());
				$("#selectApprv").val("Y");

				var tmpLength = $("input[name='hostNameChk']").length;
				var tmpData = new Array(tmpLength);
				for(var i=0 ; i < tmpLength; i++) {
					tmpData[i] = $("input[name='hostNameChk']")[i].value;
				}

				var tmpIpLength = $("input[name='ipChk']").length;
				var tmpIpData = new Array(tmpIpLength);
				for(var i=0 ; i < tmpIpLength; i++) {
					tmpIpData[i] = $("input[name='ipChk']")[i].value;
				}

				var tmpBackupIpLength = $("input[name='backupIpChk']").length;
				var tmpBackupIpData = new Array(tmpBackupIpLength);
				for(var i=0 ; i < tmpBackupIpLength; i++) {
					tmpBackupIpData[i] = $("input[name='backupIpChk']")[i].value;
				}
				var apprvDescription = $("#apprvDescription").val();
				if( $("input:checkbox[name='projectIdchk']:checked").length == $("input:checkbox[name='projectIdchk']").length && tmpData.indexOf("N") == -1 && tmpIpData.indexOf("N") == -1 && tmpBackupIpData.indexOf("N") == -1 ) {
					$.ajax({
						url : "${contextPath}/mng/req/product/checkWorkUser",
						dataType : "JSON",
						type : "POST",
						data : {
							"orderNo" : $("#allOrderNo").val()
						},
						success : function(data) {
							var result = data
							if(result > 0){
								alertBox3("작업자를 지정해 주세요.");
								return false;
							}else{
								if(projectStatusFlag == 1) {
									projectInsert();
								} else {
									checkQuota();			
								}
							}
						},
						error : function(request, status, error) {
							alertBox3("code:" + request.status + "\n" + "error:" + error);
						}
					});
				} else {
					if( tmpData.indexOf("N") != -1) {
						alertBox3("HOSTNAME을 입력해주세요");
						return false;
					} else if( tmpIpData.indexOf("N") != -1) {
						alertBox3("IP를 입력해주세요");
						return false;
					} else if( tmpBackupIpData.indexOf("N") != -1) {
						alertBox3("Backup IP를 입력해주세요");
						return false;
					} 
					if(projectStatusFlag == 1) {
						projectInsert();
					} else {
						checkQuota();			
					}
				}
			
				
				
			}
			function checkQuota(){
				var userId = $( "#h_userId").val();
				if( userId != 18109816){
					approveModalOpen();
					return;
				}
				
				alertBox("쿼터 사용량 확인중입니다.", waiting);
				$.ajax({
					url : "${contextPath}/mng/req/product/checkCloudUsage",
					dataType : "JSON",
		 			type : "GET",
					data : {
						"orderNo" : $("#allOrderNo").val()	
					},
					success : function(data) {
						if(data.res == "200"){
							alertBox("쿼터확인이 완료되었습니다.",approveModalOpen);
						}
						if(data.res == "406"){
							alertBox3("cpu쿼터를 초과하였습니다.");
						}
						if(data.res == "407"){
							alertBox3("memory쿼터를 초과하였습니다.");
						}					
						if(data.res == "408"){
							alertBox3("Disk쿼터를 초과하였습니다.");
						}
						if(data.res == "409"){
							alertBox3("가상서버 수량을 초과하였습니다.");
						}
						if(data.res == "410"){
							alertBox("볼륨최대 수량을 초과하였습니다.");
						}	
					},
					error : function(request, status, error) {
						alertBox3("code:" + request.status + "\n" + "error:" + error);
					}
				});
			}
			function nApprovSelect(){
				$("#selectApprv").val("Y");
				projectInsert();
			}
			function approvSelect(){
				$("#selectApprv").val("N");
				$("#modal-approve-review-dialog").modal();	
			}
			function approveModalOpen(){
				
				if($("#apprvPass").val() == "Y"){
					confirmBox4("결재자를 지정하시겠습니까?",approvSelect,nApprovSelect);
				} else {
					approvSelect();
				}
			}

			function waiting(){
				alertBox("쿼터 사용량 확인중입니다.", waiting);
			}

			// 결재지정 담당자 검색
			function openReviewModal(e){
				currentApprovalLine = e;
				var tmpCurrentApprovalStep = currentApprovalLine.id.replace("approvalLine", "");
				if( approvalList[tmpCurrentApprovalStep-1] != undefined) {
					confirmBox("재신청할경우 현재 상위결재자값이 초기화 됩니다.", clearUpperApproval );

				} else {
					$("#user-modal-review-dialog").modal();
					gridPopList();
				}
			}

			// 승인부서 결재지정 팝업 - 담당자조회 검색
			function gridPopList(){
				$.ajax({
					url : "${contextPath}/mbr/operation/approveUser/addProjectApproveList",
					dataType : "JSON",
					data : {
						"searchKind": $("#reviewSearchKind option:selected").val()
						, "keyword"	: $("#reviewUserId").val()
						, "cloudId" : "${projectInfo.cloudId}"
					},
					success : function(req) {
						if(req.data.length == 0){
							$("#popListReviewTable").hide();
							$("#popListReviewTable2").show();
						}else{
							$("#popListReviewTable").empty();

							$.each(req.data, function(key,val){
								$("#popListReviewTable").append(
									'<tr>'
									    +'<td class="tac">'+val.upDeptName+'/'+val.deptName+'</td>'
										+'<td class="tac">'+val.userId+'</td>'
										+'<td class="tac">'+val.userLevel+'</span>'
										+'<td class="tac">'+val.userName+'</span>'
										+'<td class="tac">'+val.userConditionText+'</td>'
										+'<td class="tac"><input type="button"  value="&#xf00c"  class="popCheckbtn"  onclick="updateReview(this, \''+val.userId+'\', \''+val.userName+'\', \''+val.deptName+'\',  \''+val.userLevel+'\',  \''+val.userLevelCode+'\');" initModal();></td>'
									+'</tr>');

							});
							$("#popListReviewTable").show();
							$("#popListReviewTable2").hide();
						}
						totalCnt = req.data.length;
						$("#totalReviewCnt").text("총 "+totalCnt+" 건");
					},
					error : function(request, status, error) {
						if(request.status == '200'){
							alertBox("접속이 만료되었습니다.", logout);
						}else{
							alertBox3("code:" + request.status + "\n" + "error:" + error);
						}
					}
				});
			}

			function clearUpperApproval() {
				var tmpCurrentApprovalStep = currentApprovalLine.id.replace("approvalLine", "");
				for(var i = tmpCurrentApprovalStep-1 ; i < 4; i++) {
					approvalList.splice(i, 1);

					$("#approvalLine"+(i+1)+"_userId").text("사번");
					$("#approvalLine"+(i+1)+"_userLevel").text("직급");
					$("#approvalLine"+(i+1)+"_userName").text("이름");

					$("#approvalLine"+(i+1)).attr('disabled', true);
				}

				//초기화 하더라도 차장급 이상이면 재활성화되게
				if( ${userLevelCode} < 5 ) {
					$("#approvalLine2").attr('disabled', false);
				}

				$("#user-modal-review-dialog").modal();
				gridPopList();
			}

			//요청부서 검토자/승인자 지정 - 요청부서(검토) 검토자지정
			function updateReview(e, userId, userName, deptName, userLevel, userLevelCode) {
				var tmpCurrentApprovalStep = currentApprovalLine.id.replace("approvalLine", "");
				if( tmpCurrentApprovalStep > 1 && approvalList[tmpCurrentApprovalStep-2] != undefined) {
					if( approvalList[tmpCurrentApprovalStep-2].userLevelCode < userLevelCode) {
						alertBox("이전단계보다 같거나 높은 직급의 담당자를 선택하세요");
						return false;
					}
				}
				/* if($("#hidden_login_user_id").val() ==userId) {
					alertBox("신청자는 본인을<br>결재자로 지정할수 없습니다.");
					return false;
				} */

				$("#popListReviewTable > tr").find("input").removeClass("active");
				$(e).toggleClass("active");
				//alert(tmpCurrentApprovalStep);
				var tmpValue = { "userId" : userId, "deptName" : deptName, "userName" : userName, "userLevel" : userLevel, "userLevelCode" : userLevelCode }
				//alert( JSON.stringify(tmpValue) );


				$("#"+currentApprovalLine.id+"_userId").text(userId);
				$("#"+currentApprovalLine.id+"_userLevel").text(userLevel);
				$("#"+currentApprovalLine.id+"_userName").text(userName);

				approvalList[tmpCurrentApprovalStep-1] = tmpValue;
				$("#hiddenUserIdReview").val(userId);
				$("#hiddenDeptNameReview").val(deptName);
				$("#hiddenUserNameReview").val(userName);

				// 다음 단계 버튼 활성화
				$("#approvalLine"+(parseInt(tmpCurrentApprovalStep)+1) ).attr('disabled', false);

			}

			// 결재라인 초기화
			function initApprovalLine() {
				var tmpUserLevelCode = 100;
				if( ${userLevelCode} == null || ${userLevelCode} == '' ) {
					tmpUserLevelCode == 100;
				} else {
					tmpUserLevelCode == ${userLevelCode};
				}

				// 직급에 따른 버튼활성화 - 3직급(차장) == 4
				$("#approvalLine1").attr('disabled', false);
				if( ${userLevelCode} < 5 ) {
					$("#approvalLine2").attr('disabled', false);
				}
			}

			function checkApproval() {
				if( approvalList[3] == undefined || approvalList[3] == null || approvalList[3] == '' ) {
					alertBox3("결재자를 지정해 주세요");
					return false;
				}

				$("#pop_projectAlias").text($("#projectAlias").val());
				$("#pop_description").text($("#projectDescription").val());
				$("#pop_price").text($("#price").val());
				$("#pop_dispSdate").text($("#dispSdate").val());
				$("#pop_dispEdate").text($("#dispEdate").val());
				$("#pop_customerName").text($("#customerName").val());
				$("#pop_deptName").text($("#deptName").val());

				projectInsert();
			}

			//데이터 세팅
			function setJsonData(){

				if( approvalList[0] == undefined || approvalList[0] == null) {
					var tmp = {"userId" : "", "deptName" : "", "userName" : "", "userLevel" : "", "userLevelCode" : ""};
					approvalList[0] = tmp;
				}

				var jsonData = {
						"reqProjectSeq": $("#allOrderNo").val()
						, "regUserId" : '${userId}'
						, "approvalStepList" : approvalList
						, "requestSeq": $("#allOrderNo").val()
						, "orderUserId": $("#h_userId").val()
						, "orderUserName": $("#h_userName").val()
						, "apprvPass" : $("#apprvPass").val()
						, "selectApprv" : $("#selectApprv").val()
					};
				return jsonData;
			}

			// 승인부서 결재라인 업데이트
			function projectInsert() {
				var jsonData = setJsonData();

				$.ajax({
					url : "${wasPath}/mng/req/product/updateApprovalLine",
					dataType : "JSON",
					type : "POST",
					data : jsonData,

					beforeSend : function(xhr, opts) {
						setLodingFun.blocksFun();
					},
					complete : function() {
						setLodingFun.nonesFun();
					},

					success : function(data) {

						var result = data;
						var res = data.res;
						var programSeq = data.reqProjectSeq;
						var apprv = data.apprv;
						if(res==1){
							if(apprv == "pass"){
								var apprvDescription = $("#apprvDescription").val();
								var jsonData = {
									"requestSeq" : $("#allOrderNo").val()
									,"stepLevel" :"8"
									,"rightStepId":"*"
									,"apprvDescription":apprvDescription
									,"orderUserId" : "${getOrderUserId.orderUserId}"
									,"apprvUserName" : "${userName}"
									,"apprvUserId" : "${userId}"
									,"projectAlias": $("#h_projectAlias").val()
									,"managerName" : $("#h_managerName").val()
									,"apprvPass" : $("#apprvPass").val()
									,"selectApprv" : $("#selectApprv").val()
								}
								ajaxProjectApprving(jsonData);
							} else {
								$("#programSeq").val(programSeq);
								alertBox("저장하였습니다.", moveListPage);
							}
						} else {
							alertBox3("fail!");
						}

					},
					error : function(request, status, error) {
						if(request.status == '200'){
							alertBox("접속이 만료되었습니다.", logout);
						}else{
							alertBox3("code:" + request.status + "\n" + "error:" + error);
						}
					}
				});
			}

			$(document).ready(function() {

				//productDetail("${orderNo}");
				var totalPrice = $("#hiddenTotalprice").val();
				var tmpPrice = addcomma(totalPrice);
				$("#totalPrice").val(tmpPrice);

				if('WF1000C0' != $("#stepId").val()){
					$('input:checkbox[name="projectIdchk"]').prop("checked",true);
				}

				App.init();
				initApprovalLine();
				
				//상세 open close
				$(".detailView").click(function name() {
					$(this).toggleClass('active');
					$(".detailVeiwArea").toggleClass('active');
				});

				//메뉴활성화
				$("#req").addClass("active");
				$("#productManage").addClass("active");

				$("input[name=hostName]").autocomplete({
					source:hostnameList
				})

				$("input[name=ip]").autocomplete({
					source:ipList
				})

				$("input[name=backupIp]").autocomplete({
					source:ipList
				})
			});

			function retryProvisioning(){
				confirmBox2("재시도 하시겠습니까?", changeProvisioningStatus);
			}

			function changeProvisioningStatus(){
				var OrderNo = $("#retryOrderno").val();
				$.ajax({
					url : "${wasPath}/mng/req/product/changeProvisioning",
					dataType : "JSON",
					type : "POST",
					data : {"orderProductSeq" : OrderNo},
					beforeSend : function(xhr, opts) {
						setLodingFun.blocksFun();
					},
					complete : function() {
						setLodingFun.nonesFun();
					},
					
					success : function(data) {
						alertBox("처리 되었습니다.", moveViewPage);
					},
					error : function(request, status, error) {
						if(request.status == '200'){
							alertBox("접속이 만료되었습니다.", logout);
						}else{
							alertBox3("code:" + request.status + "\n" + "error:" + error);
						}
					}
				});
			}		
			
			function endProvisioning(OrderNo){
				confirmBox2("작업종료 하시겠습니까?", endProvisioningStatus);
			}

			function endProvisioningStatus(){
				var OrderNo = $("#retryOrderno").val();
				$.ajax({
					url : "${wasPath}/mng/req/product/endProvisioning",
					dataType : "JSON",
					type : "POST",
					data : {"orderProductSeq" : OrderNo},
					success : function(data) {
						alertBox("처리 되었습니다.", moveViewPage);
					},
					error : function(request, status, error) {
						if(request.status == '200'){
							alertBox("접속이 만료되었습니다.", logout);
						}else{
							alertBox3("code:" + request.status + "\n" + "error:" + error);
						}
					}
				});
			}

			function alertFailMessage(Message,orderSeq){
				$("#retryMessage").html(Message);
				$("#retryOrderno").val(orderSeq);
				$("#retryModal").modal();
			}

		</script>

	</body>
</html>